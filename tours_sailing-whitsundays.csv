id,name,company_name,summary,description,duration,departure_location,departure_times,price_adult,price_child,includes,highlights,keywords,duration_hours,link_booking,link_more_info,phone,image_url,image_urls,commission_rate,active,price_source_url,price_tiers,raw_text,raw_html
438fc8538dbf1397,Deals,sailing-whitsundays,,,24 Hours,,"10:00 am, 5:00 pm",$219.00,,,,,,https://sailing-whitsundays.com/whitsundays/big-fury,https://sailing-whitsundays.com/whitsundays/big-fury,,,,,TRUE,https://sailing-whitsundays.com/whitsundays/big-fury,,"=== TOUR START: Deals ===
Google Tag Manager (noscript)
End Google Tag Manager (noscript)
$(document).ready(function() {

  // $("".dropdown"").on('touchend', function(event) {
  //     console.log(""test"")
  //   event.stopPropagation();
  //   event.preventDefault();
  //   if ($(this).hasClass('dropdown-open')) {
  //     $(this).removeClass('dropdown-open');
  //     $(this).next('ul').hide();
  //   } else {
  //     $(this).addClass('dropdown-open');
  //     $(this).next('ul').show();
  //   }
  // });

$("".mobile-menu-toggle"").click(function(){
    if ($("".mobile-menu-toggle"").hasClass('mobile-menu-open')) {
      	$(""nav"").removeClass(""nav-active"");
		$("".top-bit-blue"").show();
		$(""body"").css({ overflow: 'auto', height: 'auto' });
		$("".mobile-menu-toggle"").removeClass('mobile-menu-open')
    } else {
		$(""nav"").addClass(""nav-active"");
		$("".top-bit-blue"").hide();
		$(""body"").css({overflow: 'hidden', height: '100%' });
		$("".mobile-menu-toggle"").addClass('mobile-menu-open')
    }
});

});

$(window).scroll(function(){
    if ($(window).scrollTop() >= 34) {
    	if (!$('header').hasClass(""header-sticky"")) {
        	$('header').addClass('header-sticky');
        	$('.banner-fill').addClass('banner-margin');
    	}
    } else {
    	if ($('header').hasClass(""header-sticky"")) {
	        $('header').removeClass('header-sticky');
	        $('.banner-fill').removeClass('banner-margin');
    	}
    }
});
Save money on your Whitsunday and Great Barrier Reef adventures! Our tour deals offer discounts, packages, and last-minute sales to make your trip more affordable.
Last Minute Overnight Tours
Last Minute Day Tours
Whether you want a multiday sailing expedition through the Whitsundays or a night in an underwater hotel on the Great Barrier Reef, extend your exploration with these overnight tours!
Outer Great Barrier Reef
3 Nights + Extended Sails
Choose your perfect Whitsunday day tour! Snorkel or scuba dive in pristine reefs. Swim and sunbathe at Whitehaven Beach. Or try scenic flights, jet skis, and more!
Most Popular Day Tours
Whitehaven, Snorkel & Hill Inlet
Cruise Ship Passenger Tours
Airport Transfers & Car Rentals
Customise your Whitsunday experience with a private charter. We have a diverse array of unique vessels ready to whisk you away to paradise!
Day Charters From Airlie Beach
Day Charters From Hamilton Isl
Overnight From Airlie Beach
Overnight From Hamilton Isl
From Daydream & Long Island
Hens & Bucks Charters
Large Groups & Retreats
Planning a Whitsunday getaway has never been easier! Our packages combine tours, accommodations, and East Coast adventures for a hassle-free trip Down Under.
Fly & Cruise Packages
Whitsunday & K'gari Packages
Sail & Stay Packages
The Whitsundays have hotels, apartments, hostels, and resorts to suit all budgets and travel styles. From Airlie Beach to Hamilton Island, the options are endless!
Hoping to do some pre-trip research? Our experts have created guides to Airlie Beach, the
                                Whitsunday Islands, the Great Barrier Reef, and everything in between!
The Great Barrier Reef
Get in touch with a Whitsunday travel expert! We have staff available 24/7 all over the
                                world, ready to help you plan your holiday to the Australian tropics.
Work In The
                                Whitsundays
Free Cancellations - Up To 24 Hours Before Departure
10:00 am
                         - Daily
5:00 pm                         - Daily
: Coral Sea Marina, Airlie Beach
$219                                    AUD /


                                                                        Person
(Between: 01 Dec 2025 and 01 Dec 2026)
$180                                    AUD /


                                                                        Person
- Child (3-14 Years)
$750                                    AUD /


                                                                        Family
Fast & Fun Vessel
Friendly & Informative Crew
Explore the Whitsundays in
=== TOUR END: Deals ===
[ALL PRICE LINES FOUND IN HTML:]
$(document).ready(function() {
        AOS.init({once: true, disable: 'mobile'});
    $('.layout-room').bind('contextmenu', function(e) {
        return false;
    });
    $(window).on('load', function () {
        AOS.refresh();
    });

    if ($('video').length) {
        $('video').bind('contextmenu',function() {
            return false;
        });
        var vidurl = $('video').attr('data-url');
        if ($(window).width() <= 480) {
            $('video source').attr('src', vidurl+'-mobile.mp4');
        } else if ($(window).width() > 480 && $(window).width() <= 768) {
            $('video source').attr('src', vidurl+'-sm.mp4');
        } else if ($(window).width() > 768 && $(window).width() <= 1280) {
            $('video source').attr('src', vidurl+'-sm.mp4');
        } else if ($(window).width() > 1280) {
            $('video source').attr('src', vidurl+'-sm.mp4');
        }
        $(""video"")[0].load();
    }

	$('.layout-boat-point').on('click touch', function () {
	var url = $('.layout-boat-point').data(""image"");
                $("".layout-room"").hide().one('load', function() { //Set something to run when it finishes loading
                    $("".loader"").hide();
                    $("".layout-room"").fadeIn(); //Fade it in when loaded
                })
                    .attr('src', url) //Set the source so it begins fetching
                    .each(function() {
                        //Cache fix for browsers that don't trigger .load()
                        $("".loader"").hide();
                        if("".layout-room"".complete) $("".layout-room"").trigger('load');
                    });
                $("".loader"").show();
				$("".layout-room"").attr(""src"",$(this).data(""image"")).attr(""alt"",$(this).data(""room""));
				$('.layout-caption').text($(this).data(""room""));
	            $('.layout-display').addClass('layout-poppin');
   	        });
	        $('.layout-display').on('click touch', function () {
	            $('.layout-display').removeClass('layout-poppin');
   	      });
	});
$(document).ready(function() {

  // $("".dropdown"").on('touchend', function(event) {
  //     console.log(""test"")
  //   event.stopPropagation();
  //   event.preventDefault();
  //   if ($(this).hasClass('dropdown-open')) {
  //     $(this).removeClass('dropdown-open');
  //     $(this).next('ul').hide();
  //   } else {
  //     $(this).addClass('dropdown-open');
  //     $(this).next('ul').show();
  //   }
  // });

$("".mobile-menu-toggle"").click(function(){
    if ($("".mobile-menu-toggle"").hasClass('mobile-menu-open')) {
      	$(""nav"").removeClass(""nav-active"");
		$("".top-bit-blue"").show();
		$(""body"").css({ overflow: 'auto', height: 'auto' });
		$("".mobile-menu-toggle"").removeClass('mobile-menu-open')
    } else {
		$(""nav"").addClass(""nav-active"");
		$("".top-bit-blue"").hide();
		$(""body"").css({overflow: 'hidden', height: '100%' });
		$("".mobile-menu-toggle"").addClass('mobile-menu-open')
    }
});

});

$(window).scroll(function(){
    if ($(window).scrollTop() >= 34) {
    	if (!$('header').hasClass(""header-sticky"")) {
        	$('header').addClass('header-sticky');
        	$('.banner-fill').addClass('banner-margin');
    	}
    } else {
    	if ($('header').hasClass(""header-sticky"")) {
	        $('header').removeClass('header-sticky');
	        $('.banner-fill').removeClass('banner-margin');
    	}
    }
});
$(document).ready(function () {


        if (!isMobile) {
            var isMobile = function () {
                try {
                    document.createEvent(""TouchEvent"");
                    return true;
                } catch (e) {
                    return false;
                }
            }
        }

        $('.button-record').on('mousedown', function (FPI) {
            var FrontPageButtonID = $(this).attr(""data-id"");
            var productid = $(this).attr(""data-productid"");
            var mobile = isMobile

            var request = $.ajax({
                url: 'https://dapi.thetravelshop.com/openclick/recordProductButtonClick/',
                type: ""post"",
                data: {
                    websiteid: 2,
                    ismobile: mobile,
                    FrontPageButtonID: FrontPageButtonID,
                },
            })
            request.done(function (response) {
                //console.log(response)
            })
            request.fail(function (response) {
                //console.log(response)
            })
        });

        $('.pa-click-record').on('mousedown', function (PAClick) {
            var PrimaryActivityid = $(this).attr(""data-id"");
            var request = $.ajax({
                url: 'https://dapi.thetravelshop.com/openclick/recordProductPrinaryActivityClick/',
                type: ""post"",
                data: {
                    websiteid: 2,
                    PrimaryActivityid: PrimaryActivityid,
                },
            })
            request.done(function (response) {
                //console.log(response)
            })
            request.fail(function (response) {
                //console.log(response)
            })
        });

        $('.dropdown').on('click', function () {
            // for mobile control the dropdown class which is not the same as hover event for desktop
            if (window.innerWidth <= 979) {
                const $dropdown = $(this).siblings('ul');
                const $arrow = $(this);
                $dropdown.toggleClass('dropdown-open');
                $arrow.toggleClass('arrow-rotated');
                $(this).next('ul').toggle();
            }
        });

    });

    document.addEventListener(""DOMContentLoaded"", function () {
        const dropdownParents = document.querySelectorAll(""nav > ul > li"");

        function adjustDropdownPosition(dropdown) {
            // Reset the position before recalculating important for window resizing
            dropdown.style.left = ""50%"";
            dropdown.style.transform = ""translateX(-50%)"";

            const rect = dropdown.getBoundingClientRect();
            const viewportWidth = window.innerWidth;

            // Calculate how much overflow there is to move it back
            const rightOverflow = rect.right - viewportWidth + 20;
            const leftOverflow = rect.left - 20;

            if (rightOverflow > 0) {
                // Adjust to prevent overflow on the right
                dropdown.style.left = `calc(50% - ${rightOverflow}px)`;
            }

            if (leftOverflow < 0) {
                // Adjust to prevent overflow on the left
                dropdown.style.left = `calc(50% + ${Math.abs(leftOverflow)}px)`;
            }

        }

        function handleDropdownPositioning() {
            const viewportWidth = window.innerWidth;

            if (viewportWidth >= 979) {
                dropdownParents.forEach(parent => {
                    const dropdown = parent.querySelector(""ul"");
                    if (dropdown) {
                        adjustDropdownPosition(dropdown);
                    }
                });
            } else {
                dropdownParents.forEach(parent => {
                    const dropdown = parent.querySelector(""ul"");
                    if (dropdown) {
                        dropdown.style.left = ""0"";
                        dropdown.style.transform = ""translateX(0)"";
                    }
                });

            }
        }

        handleDropdownPositioning();

        let resizeTimeout;
        window.addEventListener(""resize"", function () {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                handleDropdownPositioning();
            }, 100);
        });
    });
$(document).ready(function() {

        /* - - - - BLOCK RIGHT CLICK ON LIVE IMAGE - - - - - */
        $('.fu-live-img-wrap').bind('contextmenu', function(e) {
            return false;
        }); 

        /* - - - - Get Number of Images - - - - - */
        var numThumbs = $('.fu-thumb').length;
        var mobThumbWidth = 7;
        var fullThumbWidth = 14;
        // Calculate the next lowest multiple of fullThumbWidth
        var maxImagesToShow = (Math.floor(numThumbs / fullThumbWidth) * fullThumbWidth) >= 14 ? (Math.floor(numThumbs / fullThumbWidth) * fullThumbWidth) : 14;

        /* - - - - Set Display Thumb Layout - - - - - */
        var breakpointLarge = 900;
        var breakpointMed = 728;
        var breakpointSmall = 500;
        var breakpointMobile = 320;
        var windowWidth = $('.fugal-display').outerWidth();

        if (windowWidth>=breakpointLarge) {
            $('.fugal-display').addClass('fugal-display-large');
            $('.fu-display-thumb').css( ""display"", ""block"");
            $('.fu-display-thumb:nth-of-type(1n+8)').css( ""display"", ""none"");
            $('.fu-display-thumb:visible:last').prepend($('<div class=""fu-display-thumb-counter"">+'+numThumbs+' Photos</div>'));
            var displayThumbNumberLineHeight = $('.fu-display-thumb-counter').outerHeight();
            $('.fu-display-thumb-counter').css( ""line-height"", """"+displayThumbNumberLineHeight+""px"");

        } else if (windowWidth>=breakpointMed && windowWidth<breakpointLarge) {
            $('.fugal-display').addClass('fugal-display-med');
            $('.fu-display-thumb').css( ""display"", ""block"");
            $('.fu-display-thumb:nth-of-type(1n+8)').css( ""display"", ""none"");
            $('.fu-display-thumb:visible:last').prepend($('<div class=""fu-display-thumb-counter"">+'+numThumbs+' Photos</div>'));
            var displayThumbNumberLineHeight = $('.fu-display-thumb-counter').outerHeight();
            $('.fu-display-thumb-counter').css( ""line-height"", """"+displayThumbNumberLineHeight+""px"");

        } else if (windowWidth>=breakpointSmall && windowWidth<breakpointMed) {
            $('.fugal-display').addClass('fugal-display-small');
            $('.fu-display-thumb').css( ""display"", ""block"");
            $('.fu-display-thumb:nth-of-type(1n+6)').css( ""display"", ""none"");
            $('.fu-display-thumb:visible:last').prepend($('<div class=""fu-display-thumb-counter"">+'+numThumbs+' Photos</div>'));
            var displayThumbNumberLineHeight = $('.fu-display-thumb-counter').outerHeight();
            $('.fu-display-thumb-counter').css( ""line-height"", """"+displayThumbNumberLineHeight+""px"");

        } else if (windowWidth>=breakpointMobile && windowWidth<breakpointSmall) {
            $('.fugal-display').addClass('fugal-display-sm');
            $('.fu-display-thumb').css( ""display"", ""block"");
            $('.fu-display-thumb:nth-of-type(1n+5)').css( ""display"", ""none"");
            $('.fu-display-thumb:visible:last').prepend($('<div class=""fu-display-thumb-counter"">+'+numThumbs+' Photos</div>'));
            var displayThumbNumberLineHeight = $('.fu-display-thumb-counter').outerHeight();
            $('.fu-display-thumb-counter').css( ""line-height"", """"+displayThumbNumberLineHeight+""px"");

        } else if (windowWidth<breakpointMobile) {
            $('.fugal-display').addClass('fugal-display-mobile');
            $('.fu-display-thumb').css( ""display"", ""block"");
            $('.fu-display-thumb:nth-of-type(1n+4)').css( ""display"", ""none"");
            $('.fu-display-thumb:visible:last').prepend($('<div class=""fu-display-thumb-counter"">+'+numThumbs+' Photos</div>'));
            var displayThumbNumberLineHeight = $('.fu-display-thumb-counter').outerHeight();
            $('.fu-display-thumb-counter').css( ""line-height"", """"+displayThumbNumberLineHeight+""px"");
        }



        /* - - - - Set Breakpoint For Mobile - - - - - */
        var setBreakpoint = 540;

        /* - - - - Hide previous button on load - - - - - */
        $('.arrow-prev-wrap').css( ""display"", ""none"");

        $("".loader"").hide();

        /* - - - - Get window width + Set number of thumbs - - - - - */
        var fugalWidth = $("".fugal-popup-wrap"").width();
        if (fugalWidth<=setBreakpoint) {
            var setThumbWidth = mobThumbWidth;
            $('.fugal-popup-wrap').addClass('fu-mobile');
        } else {
            var setThumbWidth = fullThumbWidth;
            $('.fugal-popup-wrap').removeClass('fu-mobile');
        }

        /* - - - - Set Thumbs to ~7% of galleroski width - the -1 is to prevent overflow issues - - - - - - */
        var thumbStripWidth = $('.fu-thumbs-wrap').outerWidth() - 1;
        var finalThumbWidth = (thumbStripWidth/setThumbWidth);
        $('.fu-thumb').outerWidth(finalThumbWidth);

        /* - - - - Set Height of Thumbs and Thumb strip- - - - - */
        var thumbNailResizeWidth = $('.fu-thumb').outerWidth();
        var thumbNailResizeHeight = thumbNailResizeWidth*.66;
        $('.fu-thumb').outerHeight(thumbNailResizeHeight);
        $('.fu-thumbs-wrap').outerHeight(thumbNailResizeHeight);
        $('.fu-thumbs-main').outerHeight(thumbNailResizeHeight+20);

        /* - - - - Set thumbnail strip width based on number of thumbs x width - - - - - */
        var thumbnailLength  = (numThumbs*finalThumbWidth);
        $('.fu-thumbs-row').css( ""width"", thumbnailLength);

        /* - - - - Set Main To Doc Height - Thumb Height - - - - - */
        var windowHeight = $(window).outerHeight();
        var displaySize = (windowHeight-thumbNailResizeHeight);
        $('.fu-main').outerHeight(displaySize-20);

        /* - - - - Set the counter - - - - - */
        var num = 1;
        $("".fu-counter"").html(num);
        $("".fu-counter-out"").html(numThumbs);

        /* - - - - Click Event For Display Thumb - - - - - */
        $('.fu-display-thumb').click(function(){
            $( "".zopim"" ).css('visibility','hidden');
            $('.fugal-popup-wrap').addClass('fugal-poppin');

            $( "".fu-thumb"" ).each(function( index ) {
                var thumb = $(this).attr( ""data-thumb"" );
                $(this).css( ""background-image"", ""url('""+thumb+""')"");
            });
            
            $('html, body').css({
                overflow: 'hidden',
                height: '100%'
            });

            var url = $(this).attr( ""data-url"" );
            $('.fu-live-img').attr('src', url );
            $('.fu-thumb-active').removeClass('fu-thumb-active');
            $("".fu-thumb[data-url='""+url+""']"").addClass('fu-thumb-active');

            var thumbcount = ($('.fu-thumb-active').prevAll('.fu-thumb').length);
            var thumbcounttotal = thumbcount+1;
            $("".fu-counter"").html(thumbcounttotal);

            if (thumbcount == 0){
                $('.arrow-prev-wrap').css( ""display"", ""none"");
                $('.arrow-next-wrap').css( ""display"", ""block"");
            } else if (thumbcounttotal == numThumbs){
                $('.arrow-next-wrap').css( ""display"", ""none"");
                $('.arrow-prev-wrap').css( ""display"", ""block"");
            } else {
                $('.arrow-next-wrap').css( ""display"", ""block"");
                $('.arrow-prev-wrap').css( ""display"", ""block"");
            }

        });

        /* - - - - RESIZE WINDOW ACTIONS - - - - - */
        $(window).resize(function(){
            /* - - - - Get window width + Set number of thumbs - - - - - */
            var fugalWidth = $("".fugal-popup-wrap"").width();
            if (fugalWidth<=setBreakpoint) {
                var setThumbWidth = mobThumbWidth;
                $('.fugal-popup-wrap').addClass('fu-mobile');
            } else {
                var setThumbWidth = fullThumbWidth;
                $('.fugal-popup-wrap').removeClass('fu-mobile');
            }
            /* - - - - Set Thumbs to 10% of galleroski width - - - - - */
            var thumbStripWidth = $('.fu-thumbs-wrap').outerWidth();
            var finalThumbWidth = (thumbStripWidth/setThumbWidth);
            $('.fu-thumb').outerWidth(finalThumbWidth);

            /* - - - - Set Height of Thumbs and Thumb strip- - - - - */
            var thumbNailResizeWidth = $('.fu-thumb').outerWidth();
            var thumbNailResizeHeight = thumbNailResizeWidth*.66;
            $('.fu-thumb').outerHeight(thumbNailResizeHeight);
            $('.fu-thumbs-wrap').outerHeight(thumbNailResizeHeight);
            $('.fu-thumbs-main').outerHeight(thumbNailResizeHeight+20);

            /* - - - - Set thumbnail strip width based on number of thumbs x width - - - - - */
            var thumbnailLength  = (numThumbs*finalThumbWidth);
            $('.fu-thumbs-row').css( ""width"", thumbnailLength);

            /* - - - - Set Main To Doc Height - Thumb Height - - - - - */
            var windowHeight = $(window).outerHeight();
            var displaySize = (windowHeight-thumbNailResizeHeight);
            $('.fu-main').outerHeight(displaySize-20);

            if ($('.fu-view-all-thumbs-btn').is("".fu-hide-thumbs-btn"")) {
                var viewAllThumbsHeight = $('.fu-thumbs-wrap').outerHeight();
                $('.fu-thumbs-main').outerHeight(viewAllThumbsHeight+20);
                var displaySize = (windowHeight-viewAllThumbsHeight);
                $('.fu-main').outerHeight(displaySize-20);
            }

            var windowWidth = $('.fugal-display').outerWidth();

            $('.fugal-display').removeClass('fugal-display-large fugal-display-med fugal-display-small fugal-display-sm fugal-display-mobile');
            $('.fu-display-thumb-counter').remove();

            if (windowWidth>=breakpointLarge) {
                $('.fugal-display').addClass('fugal-display-large');
                $('.fu-display-thumb').css( ""display"", ""block"");
                $('.fu-display-thumb:nth-of-type(1n+8)').css( ""display"", ""none"");
                $('.fu-display-thumb:visible:last').prepend($('<div class=""fu-display-thumb-counter"">+'+numThumbs+' Photos</div>'));
                var displayThumbNumberLineHeight = $('.fu-display-thumb-counter').outerHeight();
                $('.fu-display-thumb-counter').css( ""line-height"", """"+displayThumbNumberLineHeight+""px"");

            } else if (windowWidth>=breakpointMed && windowWidth<breakpointLarge) {
                $('.fugal-display').addClass('fugal-display-med');
                $('.fu-display-thumb').css( ""display"", ""block"");
                $('.fu-display-thumb:nth-of-type(1n+8)').css( ""display"", ""none"");
                $('.fu-display-thumb:visible:last').prepend($('<div class=""fu-display-thumb-counter"">+'+numThumbs+' Photos</div>'));
                var displayThumbNumberLineHeight = $('.fu-display-thumb-counter').outerHeight();
                $('.fu-display-thumb-counter').css( ""line-height"", """"+displayThumbNumberLineHeight+""px"");

            } else if (windowWidth>=breakpointSmall && windowWidth<breakpointMed) {
                $('.fugal-display').addClass('fugal-display-small');
                $('.fu-display-thumb').css( ""display"", ""block"");
                $('.fu-display-thumb:nth-of-type(1n+6)').css( ""display"", ""none"");
                $('.fu-display-thumb:visible:last').prepend($('<div class=""fu-display-thumb-counter"">+'+numThumbs+' Photos</div>'));
                var displayThumbNumberLineHeight = $('.fu-display-thumb-counter').outerHeight();
                $('.fu-display-thumb-counter').css( ""line-height"", """"+displayThumbNumberLineHeight+""px"");

            } else if (windowWidth>=breakpointMobile && windowWidth<breakpointSmall) {
                $('.fugal-display').addClass('fugal-display-sm');
                $('.fu-display-thumb').css( ""display"", ""block"");
                $('.fu-display-thumb:nth-of-type(1n+5)').css( ""display"", ""none"");
                $('.fu-display-thumb:visible:last').prepend($('<div class=""fu-display-thumb-counter"">+'+numThumbs+' Photos</div>'));
                var displayThumbNumberLineHeight = $('.fu-display-thumb-counter').outerHeight();
                $('.fu-display-thumb-counter').css( ""line-height"", """"+displayThumbNumberLineHeight+""px"");

            } else if (windowWidth<breakpointMobile) {
                $('.fugal-display').addClass('fugal-display-mobile');
                $('.fu-display-thumb').css( ""display"", ""block"");
                $('.fu-display-thumb:nth-of-type(1n+4)').css( ""display"", ""none"");
                $('.fu-display-thumb:visible:last').prepend($('<div class=""fu-display-thumb-counter"">+'+numThumbs+' Photos</div>'));
                var displayThumbNumberLineHeight = $('.fu-display-thumb-counter').outerHeight();
                $('.fu-display-thumb-counter').css( ""line-height"", """"+displayThumbNumberLineHeight+""px"");
            }

        });
        /* - - - - END RESIZE WINDOW ACTIONS - - - - - */



        /* - - - - Close Fugal When Clicking X or Background - - - - - */
        $('.fu-popup-close').click(function(){
            $('.fugal-popup-wrap').removeClass('fugal-poppin');
            $( "".zopim"" ).css('visibility','visible');
            $('html, body').css({ overflow: 'auto', height: 'auto' });
        });
        $("".fu-live-img-wrap"").click(function(closeByClickingBackground){
            if(closeByClickingBackground.target != this) return; // only continue if the target itself has been clicked
            $('.fugal-popup-wrap').removeClass('fugal-poppin');
            $( "".zopim"" ).css('visibility','visible');
            $('html, body').css({ overflow: 'auto', height: 'auto' });
        });

        $('.fu-view-all-thumbs-btn').on('click', function(event){
            if ($(this).is("".fu-hide-thumbs-btn"")) {
                // Show fewer thumbnails
                $(this).removeClass('fu-hide-thumbs-btn');
                $(this).html('View More Thumbnails');

                // Hide extra images beyond maxImagesToShow
                $('.fu-thumb').each(function(index) {
                    if (index >= maxImagesToShow) {
                        $(this).hide();
                    } else {
                        $(this).show();
                    }
                });
            } else {
                // Show all thumbnails
                $(this).addClass('fu-hide-thumbs-btn');
                $('.fu-thumbs-main').addClass('fu-view-all-thumbs');
                $(this).html('View Less Thumbnails');
                $('.fu-thumb').show();
            }
            // Adjust the height of thumbnail container
            var windowHeight = $(window).outerHeight();
            var viewAllThumbsHeight = $('.fu-thumbs-wrap').outerHeight();
            $('.fu-thumbs-main').outerHeight(viewAllThumbsHeight + 20);
            // Adjust the main container height
            var displaySize = windowHeight - viewAllThumbsHeight;
            $('.fu-main').outerHeight(displaySize - 20);
        });

        /* - - - - Click and Drag Function - - - - - */
        var x,y,top,left,down;
        $("".fu-thumbs-wrap"").mousedown(function(e){
            e.preventDefault();
            down=true;
            x=e.pageX;
            y=e.pageY;
            left=$(this).scrollLeft();
        });
        $(""body"").mousemove(function(e){
            if(down){
                var newX=e.pageX;
                var newY=e.pageY;
                $("".fu-thumbs-wrap"").scrollLeft(left-newX+x);
            }
        });
        $(""body"").mouseup(function(e){down=false;});

        /* - - - - Click On Live Image Function - - - - - */
        $('.fu-live-img').on('click', function() {
            var $nxt = $('.fu-thumb-active').next('.fu-thumb');
            if ($nxt.length != 0) {
                var url = $nxt.attr( ""data-url"" );
                $("".fu-live-img"").hide().one('load', function() { //Set something to run when it finishes loading
                    $("".loader"").hide();
                    $("".fu-live-img"").fadeIn(); //Fade it in when loaded
                })
                    .attr('src', url) //Set the source so it begins fetching
                    .each(function() {
                        //Cache fix for browsers that don't trigger .load()
                        $("".loader"").hide();
                        if("".fu-live-img"".complete) $("".fu-live-img"").trigger('load');
                    });
                $("".loader"").show();

                $('.fu-thumb-active').removeClass('fu-thumb-active');
                $nxt.addClass('fu-thumb-active');

                var leftPos = $('.fu-thumbs-wrap').scrollLeft();
                $("".fu-thumbs-wrap"").animate({
                    scrollLeft: leftPos + (finalThumbWidth)
                }, 100);

                var thumbcount = ($('.fu-thumb-active').prevAll('.fu-thumb').length);
                var thumbcounttotal = thumbcount+1;
                $("".fu-counter"").html(thumbcounttotal);

                if (thumbcount == 0){
                    $('.arrow-prev-wrap').css( ""display"", ""none"");
                    $('.arrow-next-wrap').css( ""display"", ""block"");
                } else if (thumbcounttotal == numThumbs){
                    $('.arrow-next-wrap').css( ""display"", ""none"");
                    $('.arrow-prev-wrap').css( ""display"", ""block"");
                } else {
                    $('.arrow-next-wrap').css( ""display"", ""block"");
                    $('.arrow-prev-wrap').css( ""display"", ""block"");
                }
            }
        });

        $('.fu-watermark').click(function(){
            $('.fu-live-img').trigger('click');
        });


        /* - - - - Next Arrow Function - - - - - */
        $('.arrow-next').click(function(){
            var $nxt = $('.fu-thumb-active').next('.fu-thumb');
            if ($nxt.length != 0) {
                var url = $nxt.attr( ""data-url"" );

                $("".fu-live-img"").hide().one('load', function() { //Set something to run when it finishes loading
                    $("".loader"").hide();
                    $("".fu-live-img"").fadeIn(); //Fade it in when loaded
                })
                    .attr('src', url) //Set the source so it begins fetching
                    .each(function() {
                        //Cache fix for browsers that don't trigger .load()
                        $("".loader"").hide();
                        if("".fu-live-img"".complete) $("".fu-live-img"").trigger('load');
                    });
                $("".loader"").show();

                $('.fu-thumb-active').removeClass('fu-thumb-active');
                $nxt.addClass('fu-thumb-active');

                var leftPos = $('.fu-thumbs-wrap').scrollLeft();
                $("".fu-thumbs-wrap"").animate({
                    scrollLeft: leftPos + (finalThumbWidth)
                }, 100);

                var thumbcount = ($('.fu-thumb-active').prevAll('.fu-thumb').length);
                var thumbcounttotal = thumbcount+1;
                $("".fu-counter"").html(thumbcounttotal);

                if (thumbcount == 0){
                    $('.arrow-prev-wrap').css( ""display"", ""none"");
                    $('.arrow-next-wrap').css( ""display"", ""block"");
                } else if (thumbcounttotal == numThumbs){
                    $('.arrow-next-wrap').css( ""display"", ""none"");
                    $('.arrow-prev-wrap').css( ""display"", ""block"");
                } else {
                    $('.arrow-next-wrap').css( ""display"", ""block"");
                    $('.arrow-prev-wrap').css( ""display"", ""block"");
                }
            }
        });

        /* - - - - Previous Arrow Function - - - - - */
        $('.arrow-prev').click(function(){
            var $prv = $('.fu-thumb-active').prev('.fu-thumb');
            if ($prv.length != 0) {

                var url = $prv.attr( ""data-url"" );

                $("".fu-live-img"").hide().one('load', function() { //Set something to run when it finishes loading
                    $("".loader"").hide();
                    $("".fu-live-img"").fadeIn(); //Fade it in when loaded
                })
                    .attr('src', url) //Set the source so it begins fetching
                    .each(function() {
                        //Cache fix for browsers that don't trigger .load()
                        $("".loader"").hide();
                        if("".fu-live-img"".complete) $("".fu-live-img"").trigger('load');
                    });
                $("".loader"").show();

                $('.fu-thumb-active').removeClass('fu-thumb-active');
                $prv.addClass('fu-thumb-active');

                var leftPos = $('.fu-thumbs-wrap').scrollLeft();
                $("".fu-thumbs-wrap"").animate({
                    scrollLeft: leftPos - (finalThumbWidth)
                }, 100);

                var thumbcount = ($('.fu-thumb-active').prevAll('.fu-thumb').length);
                var thumbcounttotal = thumbcount+1;
                $("".fu-counter"").html(thumbcounttotal);

                if (thumbcount == 0){
                    $('.arrow-prev-wrap').css( ""display"", ""none"");
                    $('.arrow-next-wrap').css( ""display"", ""block"");
                } else if (thumbcounttotal == numThumbs){
                    $('.arrow-next-wrap').css( ""display"", ""none"");
                    $('.arrow-prev-wrap').css( ""display"", ""block"");
                } else {
                    $('.arrow-next-wrap').css( ""display"", ""block"");
                    $('.arrow-prev-wrap').css( ""display"", ""block"");
                }
            }
        });

        /* - - - -Click Thumbnail Function - - - - - */
        $('.fu-thumb').click(function(){
            $('.fu-thumb-active').removeClass('fu-thumb-active');
            $(this).addClass('fu-thumb-active');
            var url = $(this).attr( ""data-url"" );

            $("".fu-live-img"").hide().one('load', function() { //Set something to run when it finishes loading
                $("".loader"").hide();
                $("".fu-live-img"").fadeIn(); //Fade it in when loaded
            })
                .attr('src', url) //Set the source so it begins fetching
                .each(function() {
                    //Cache fix for browsers that don't trigger .load()
                    $("".loader"").hide();
                    if("".fu-live-img"".complete) $("".fu-live-img"").trigger('load');
                });
            $("".loader"").show();

            var thumbcount = ($('.fu-thumb-active').prevAll('.fu-thumb').length);
            var thumbcounttotal = thumbcount+1;
            $("".fu-counter"").html(thumbcounttotal);

            if (thumbcount == 0){
                $('.arrow-prev-wrap').css( ""display"", ""none"");
                $('.arrow-next-wrap').css( ""display"", ""block"");
            } else if (thumbcounttotal == numThumbs){
                $('.arrow-next-wrap').css( ""display"", ""none"");
                $('.arrow-prev-wrap').css( ""display"", ""block"");
            } else {
                $('.arrow-next-wrap').css( ""display"", ""block"");
                $('.arrow-prev-wrap').css( ""display"", ""block"");
            }

        });

        /* - - - - KEYDOWN FUNCTIONS - - - - - */

        $(document).keydown(function(escClose) {
            // ESCAPE key pressed
            if (escClose.keyCode == 27) {
                $('.fugal-popup-wrap').removeClass('fugal-poppin');
                $('html, body').css({ overflow: 'auto', height: 'auto' });
            }
            // LEFT ARROW key pressed
            if (escClose.keyCode == 37) {
                var $prv = $('.fu-thumb-active').prev('.fu-thumb');
                if ($prv.length != 0) {

                    var url = $prv.attr( ""data-url"" );

                    $("".fu-live-img"").hide().one('load', function() { //Set something to run when it finishes loading
                        $("".loader"").hide();
                        $("".fu-live-img"").fadeIn(); //Fade it in when loaded
                    })
                        .attr('src', url) //Set the source so it begins fetching
                        .each(function() {
                            //Cache fix for browsers that don't trigger .load()
                            $("".loader"").hide();
                            if("".fu-live-img"".complete) $("".fu-live-img"").trigger('load');
                        });
                    $("".loader"").show();

                    $('.fu-thumb-active').removeClass('fu-thumb-active');
                    $prv.addClass('fu-thumb-active');

                    var leftPos = $('.fu-thumbs-wrap').scrollLeft();
                    $("".fu-thumbs-wrap"").animate({
                        scrollLeft: leftPos - (finalThumbWidth)
                    }, 100);

                    var thumbcount = ($('.fu-thumb-active').prevAll('.fu-thumb').length);
                    var thumbcounttotal = thumbcount+1;
                    $("".fu-counter"").html(thumbcounttotal);

                    if (thumbcount == 0){
                        $('.arrow-prev-wrap').css( ""display"", ""none"");
                        $('.arrow-next-wrap').css( ""display"", ""block"");
                    } else if (thumbcounttotal == numThumbs){
                        $('.arrow-next-wrap').css( ""display"", ""none"");
                        $('.arrow-prev-wrap').css( ""display"", ""block"");
                    } else {
                        $('.arrow-next-wrap').css( ""display"", ""block"");
                        $('.arrow-prev-wrap').css( ""display"", ""block"");
                    }
                }
            }
            // RIGHT ARROW key pressed
            if (escClose.keyCode == 39) {
                var $nxt = $('.fu-thumb-active').next('.fu-thumb');
                if ($nxt.length != 0) {
                    var url = $nxt.attr( ""data-url"" );

                    $("".fu-live-img"").hide().one('load', function() { //Set something to run when it finishes loading
                        $("".loader"").hide();
                        $("".fu-live-img"").fadeIn(); //Fade it in when loaded
                    })
                        .attr('src', url) //Set the source so it begins fetching
                        .each(function() {
                            //Cache fix for browsers that don't trigger .load()
                            $("".loader"").hide();
                            if("".fu-live-img"".complete) $("".fu-live-img"").trigger('load');
                        });
                    $("".loader"").show();

                    $('.fu-thumb-active').removeClass('fu-thumb-active');
                    $nxt.addClass('fu-thumb-active');

                    var leftPos = $('.fu-thumbs-wrap').scrollLeft();
                    $("".fu-thumbs-wrap"").animate({
                        scrollLeft: leftPos + (finalThumbWidth)
                    }, 100);

                    var thumbcount = ($('.fu-thumb-active').prevAll('.fu-thumb').length);
                    var thumbcounttotal = thumbcount+1;
                    $("".fu-counter"").html(thumbcounttotal);

                    if (thumbcount == 0){
                        $('.arrow-prev-wrap').css( ""display"", ""none"");
                        $('.arrow-next-wrap').css( ""display"", ""block"");
                    } else if (thumbcounttotal == numThumbs){
                        $('.arrow-next-wrap').css( ""display"", ""none"");
                        $('.arrow-prev-wrap').css( ""display"", ""block"");
                    } else {
                        $('.arrow-next-wrap').css( ""display"", ""block"");
                        $('.arrow-prev-wrap').css( ""display"", ""block"");
                    }
                }
            }
        });

        // Oliver -> open thumbs at start
        $('.fu-view-all-thumbs-btn').trigger('click');
        // Tom -> double click to start with smaller amount of thumbs
        $('.fu-view-all-thumbs-btn').trigger('click');

    });
$219
RRP $230
$219                                    AUD /


                                                                        Person
$180                                    AUD /


                                                                        Person
RRP $810
$750                                    AUD /


                                                                        Family
function starDisplaySuggested(starsID, rating) {
                                    let starPercentage = (rating / 5) * 100;
                                    let starPercentageRounded = `${Math.round(starPercentage / 10) * 10}%`;
                                    $('#' + starsID).css(""width"", starPercentageRounded);
                                }

                                starDisplaySuggested(""starsProd0"", 4.97);
$209
NOW
                                                    $199
function starDisplaySuggested(starsID, rating) {
                                    let starPercentage = (rating / 5) * 100;
                                    let starPercentageRounded = `${Math.round(starPercentage / 10) * 10}%`;
                                    $('#' + starsID).css(""width"", starPercentageRounded);
                                }

                                starDisplaySuggested(""starsProd1"", 4.82);
$205
NOW
                                                    $201
function starDisplaySuggested(starsID, rating) {
                                    let starPercentage = (rating / 5) * 100;
                                    let starPercentageRounded = `${Math.round(starPercentage / 10) * 10}%`;
                                    $('#' + starsID).css(""width"", starPercentageRounded);
                                }

                                starDisplaySuggested(""starsProd2"", 4.86);
$230
NOW
                                                    $219
function starDisplaySuggested(starsID, rating) {
                                    let starPercentage = (rating / 5) * 100;
                                    let starPercentageRounded = `${Math.round(starPercentage / 10) * 10}%`;
                                    $('#' + starsID).css(""width"", starPercentageRounded);
                                }

                                starDisplaySuggested(""starsProd3"", 4.96);
NOW
                                                    $230
function starDisplaySuggested(starsID, rating) {
                                    let starPercentage = (rating / 5) * 100;
                                    let starPercentageRounded = `${Math.round(starPercentage / 10) * 10}%`;
                                    $('#' + starsID).css(""width"", starPercentageRounded);
                                }

                                starDisplaySuggested(""starsProd4"", 4.93);
$249
NOW
                                                    $239
function starDisplaySuggested(starsID, rating) {
                                    let starPercentage = (rating / 5) * 100;
                                    let starPercentageRounded = `${Math.round(starPercentage / 10) * 10}%`;
                                    $('#' + starsID).css(""width"", starPercentageRounded);
                                }

                                starDisplaySuggested(""starsProd5"", 4.90);
$329
NOW
                                                    $319
let start = 0;
                        const limit = 4;
                        const productid = parseInt(1049);
                        let selectedStar = 0;
                        let selectedSorting = 'recommended';

                        // document.querySelectorAll('video').forEach(v => {
                        //     v.autoplay = true;
                        //     v.play().catch(() => {
                        //     });
                        // });

                        $(document).ready(function () {
                            // Initial load

                            getReviews();
                        });

                        $('.bar-container').on('click', function () {
                            selectedStar = $(this).data('star');
                            start = 0;

                            $('#reviews-container').empty();
                            getReviews();
                        });

                        let swiperInstance;

                        function openSwiperGallery(images, startIndex) {
                            const modal = document.getElementById('swiperModal');
                            const wrapper = modal.querySelector('.swiper-wrapper');

                            wrapper.innerHTML = images.map(img => `
                                <div class=""swiper-slide"" style=""display:flex; justify-content:center; align-items:center;"">
                                    <img class=""review-swiper-image"" src=""${img.ImageURL}"" alt=""${img.AltText || ''}"" />
                                </div>
                            `).join('');

                            modal.style.display = 'block';

                            if (swiperInstance && typeof swiperInstance.destroy === 'function') {
                                swiperInstance.destroy(true, true);
                                swiperInstance = null;
                            }

                            // Deals with stupid swiper dom load image mis-ordering
                            if (images.length < 4) {
                                if (startIndex === 0) {
                                    startIndex = images.length - 1;
                                } else {
                                    startIndex--;
                                }
                            }

                            // A bit of a hack to make it work - as the images are generated dynamically it messes with swiper's ability to detect initial slide and amount of slides
                            setTimeout(() => {
                                swiperInstance = new window.Swiper('.mySwiper', {
                                    loop: true,
                                    slidesPerView: 1,
                                    navigation: {
                                        nextEl: '.swiper-button-next',
                                        prevEl: '.swiper-button-prev',
                                    },
                                    // pagination: {
                                    //     el: '.swiper-pagination',
                                    //     clickable: true,
                                    // },
                                    on: {
                                        init(swiper) {
                                            swiper.slideTo(startIndex, 0);
                                            setTimeout(() => swiper.update(), 0);
                                        }
                                    }
                                });
                            }, 50);
                        }

                        function closeSwiperGallery() {
                            document.getElementById('swiperModal').style.display = 'none';
                        }

                        $('#reviewSortingOptions').on('change', function () {
                            selectedSorting = $(this).val();
                            start = 0;

                            $('#reviews-container').empty();
                            getReviews();
                        })


                        $('.refreshReviews').on('click', function () {
                            start = 0;
                            selectedStar = 0;
                            selectedSorting = 'recommended'
                            $('#reviewSortingOptions').val(selectedSorting);

                            $('#reviews-container').empty();
                            getReviews();
                        })

                        $('#reviewsShowMoreBtn').on('click', function () {
                            const $btn = $(this);
                            $btn.find('.btn-text').hide();
                            $btn.find('.btn-loader').show();
                            $btn.prop('disabled', true);

                            sendClickData($btn, 'showMore', $('.reviewSummary'));

                            getReviews().always(function () {
                                $btn.find('.btn-text').show();
                                $btn.find('.btn-loader').hide();
                                $btn.prop('disabled', false);
                            });
                        });

                        function formatUnixStringTimestamp(tsString) {
                            const ts = parseInt(tsString, 10);
                            if (isNaN(ts)) return ''; // fallback if something went wrong
                            const d = new Date(ts * 1000);
                            return `${d.getDate()} ${d.toLocaleString('default', {month: 'short'})} ${d.getFullYear()}`;
                        }

                        function renderStars(rating) {
                            let stars = '';
                            for (let i = 1; i <= rating; i++) {
                                stars += '<span>&#xf005;</span> '; // Unicode star, like PHP echo
                            }
                            return stars;
                        }

                        function getReviews() {
                            const payload = {
                                productid: productid,
                                selectedStar: selectedStar,
                                start: start,
                                limit: limit,
                                selectedSorting: selectedSorting
                            };

                            return $.ajax({
                                url: `/webapiwrapper/get_product_reviews/${productid}/${selectedStar}/${start}/${limit}/${selectedSorting}`,
                                type: ""POST"",
                                contentType: ""application/json"",
                                data: JSON.stringify(payload),
                                timeout: 30000
                            }).done(function (response) {
                                if (response && response.status === ""success"" && Array.isArray(response.data) && response.data.length > 0) {
                                    response.data.forEach(function (review) {
                                        let travelDateStr = '';

                                        if (review.DepartDate) {
                                            try {
                                                const travelDate = new Intl.DateTimeFormat('en-GB', {
                                                    // day: '2-digit',
                                                    month: 'long',
                                                    year: 'numeric'
                                                }).format(new Date(review.DepartDate.replace(' ', 'T')));

                                                travelDateStr = `<span class=""reviewDate"">, travelled in ${travelDate}</span>`;
                                            } catch (e) {
                                                console.warn('Invalid DepartDate:', review.DepartDate, e);
                                            }
                                        }

                                        if (selectedSorting != ""travelDate"") {
                                            const label = formatMonthYear(review.Created);
                                            travelDateStr = label ? `<span class=""reviewDate"">, ${label}</span>` : """";
                                        }

                                        let imagesHtml = '';

                                        if (review.Images && review.Images.length > 0) {
                                            const encodedImages = encodeURIComponent(JSON.stringify(review.Images));

                                            imagesHtml += `<div class=""productReviewImages"" data-reviewid=""${review.CommentID}"">`;

                                            let imageURLs = review.Images.map(img => img.ImageURL);

                                            review.Images.forEach((image, index) => {
                                                imagesHtml += `
                                                    <img
                                                        src=""${image.ImageURL}""
                                                        class=""productReviewImage""
                                                        alt=""${image.AltText || ''}""
                                                        data-images=""${encodedImages}""
                                                        data-index=""${index}""
                                                    />
                                                `;
                                            });

                                            imagesHtml += `</div>`;
                                        }


                                        $('#reviews-container').append(
                                            `<div class=""review-block clear"">
                                                <div class=""reviewCommentContainer"">
                                                    <div class=""rb-name"">
                                                        ${review.PostName}
                                                        ${travelDateStr}
                                                    </div>
                                                    <div class=""reviewerStars"">
                                                        ${renderStars(review.Rating)}
                                                    </div>
                                                    <div class=""rb-comment"">${review.Comment}</div>
                                                    ${imagesHtml}
                                                </div>
                                            </div>`
                                        );
                                    });

                                    start += limit;

                                    $('#reviewsShowMoreBtn').show();

                                    if (response.data.length < limit) {
                                        $('#reviewsShowMoreBtn').hide();
                                    }
                                } else {
                                    $('#reviewsShowMoreBtn').hide();
                                }
                            }).fail(function (xhr) {
                                console.error(""Failed to fetch reviews:"", xhr.responseText);
                            });
                        }

                        $(document).on('click', '.productReviewImage', function () {
                            const images = JSON.parse(decodeURIComponent($(this).attr('data-images')));
                            const index = parseInt($(this).attr('data-index'), 10);
                            openSwiperGallery(images, index);
                        });

                        function formatMonthYear(value) {
                            try {
                                if (value instanceof Date) {
                                    return new Intl.DateTimeFormat(""en-GB"", {
                                        month: ""long"",
                                        year: ""numeric"",
                                        timeZone: ""UTC"",
                                    }).format(value);
                                }

                                const str = String(value).trim();
                                let ms;

                                if (/^\d+$/.test(str)) {
                                    ms = str.length === 10 ? Number(str) * 1000 : Number(str);
                                } else {
                                    const normalized = str.includes("" "") ? str.replace("" "", ""T"") : str;
                                    ms = Date.parse(normalized);
                                    if (Number.isNaN(ms)) return """";
                                }

                                const d = new Date(ms);
                                return new Intl.DateTimeFormat(""en-GB"", {
                                    month: ""long"",
                                    year: ""numeric"",
                                    timeZone: ""UTC"",
                                }).format(d);
                            } catch (e) {
                                console.warn(""Created parse failed:"", value, e);
                                return """";
                            }
                        }
We can build packages to save you $$$
function onSubmitRhsForm(token) {
        $(""#contact-us-sidebar"").submit();
    }



    $(document).ready(function() {
        $(""#enq-name"").bind(""keyup change"", function(e) {
            if ($(this).val().length > 3) {
                $(this).addClass('good-input');
                formCheck();
            } else {
                $(this).removeClass('good-input');
            }
        });
        $(""#enq-email"").bind(""keyup change"", function(e) {
            if ($(this).val().length > 5) {
                $(this).addClass('good-input');
                formCheck();
            } else {
                $(this).removeClass('good-input');
            }
        });
        $(""#enq-msg"").bind(""keyup change"", function(e) {
            if ($(this).val().length > 10) {
                $(this).addClass('good-input');
                formCheck();
            } else {
                $(this).removeClass('good-input');
            }
        });
        function formCheck() {
            if (($(""#enq-name"").hasClass(""good-input"")) && ($(""#enq-email"").hasClass(""good-input"")) && ($(""#enq-msg"").hasClass(""good-input""))) {
                $('#rhsSubmitBtn').toggleClass('btn-success btn-default');
                $('#rhsSubmitBtn').addClass('enabled').removeClass('disabled');
            } else {
                $('#rhsSubmitBtn').toggleClass('btn-success btn-default');
                $('#rhsSubmitBtn').addClass('disabled').removeClass('enabled');
            }
        }
    });
var siteUrl = 'https://sailing-whitsundays.com/';
        var depdate = '';
        var currentDate = '';
        var isQuantityEntered = false;
        var hasLiveAvailWithBooking = false;

        function enableSubmit(manifest) {

            return new Promise(function (resolve, reject) {
                var x = false;
                if (!manifest) {
                    manifest = [];
                } else {
                    x = true;
                }


                var avail = manifest['Availability'];
                var opis = [];
                if (manifest['Availability'] && manifest['Availability']['options']) {
                    opis = manifest['Availability']['options'];
                }

                var typeofaction = $(""#pricingform"").attr(""do_action"");
                depdate = $('#depdate').val();

                // Load the pricing depending on the date selected
                $('#view_pricing').html('<div class=\""loaderblack\""></div>');
                $(""#btn_CheckAvailability"").addClass('booking-hide-button');
                $('#btn_BookNow').addClass('booking-hide-button');
                // which button was clicked
                let button = $(document.activeElement).attr('id');

                var request = $.ajax({
                    url: siteUrl + 'product/get-price/',
                    type: ""post"",
                    data: {
                        date: depdate,
                        id: '1049',
                        manifest: JSON.stringify(manifest)
                    },
                    timeout: 5000
                });

                request.done(function (response) {

                    if (response) {
                        if ($('#depdate').val() == '' && $("".booking-title-gift"").hasClass(""booking-hide-button"")) {
                            $('#view_pricing').html(""<div class='select-date-please'><p>Please select a Date of Travel above to view product options.</p></div>"");
                        } else {
                            $('#view_pricing').html(response)
                        }
                        //CHECKING ACTION BASED ON INITIAL BUTTON CLICK ON PREVIOUS SCREEN
                        if (x !== true && typeofaction == 'check') {
                            $('.availNote').css(""display"", ""inline-block"");

                            hasLiveAvailWithBooking = true;
                            $(""#btn_CheckAvailability"").removeClass('booking-hide-button');
                            $(""#btn_BookNow"").addClass('booking-hide-button');

                        } else if (x !== true && typeofaction == 'booking') {
                                                        hasLiveAvailWithBooking = true;
                            $('.availNote').css(""display"", ""inline-block"");
                            //   $(""#btn_CheckAvailability"").removeClass('booking-hide-button').removeClass('disabled');
                            $(""#btn_CheckAvailability"").removeClass('booking-hide-button');
                            $(""#btn_BookNow"").addClass('booking-hide-button');
                            $(""#btn_BookGiftcard"").addClass('booking-hide-button');

                                                    } else if (x !== true && typeofaction == 'giftcard') {
                            hasLiveAvailWithBooking = false;
                            $(""#btn_CheckAvailability"").addClass('booking-hide-button');
                            $(""#btn_BookNow"").addClass('booking-hide-button');
                            $(""#btn_BookGiftcard"").removeClass('booking-hide-button');
                            $(""#view_pricing"").removeClass('booking-hide-button');
                        }

                        resolve(true);

                    } else {

                        if (x !== true && typeofaction == 'check') {
                            hasLiveAvailWithBooking = true;
                            $(""#btn_CheckAvailability"").removeClass('booking-hide-button');
                            //   $(""#btn_CheckAvailability"").removeClass('booking-hide-button').removeClass('disabled');
                            $(""#btn_BookNow"").addClass('booking-hide-button');

                        }

                        if (x !== true && typeofaction == 'booking') {
                            hasLiveAvailWithBooking = false;

                                                        $(""#btn_CheckAvailability"").removeClass('booking-hide-button');

                            //   $(""#btn_CheckAvailability"").addClass('booking-hide-button').removeClass('disabled');
                            $(""#btn_BookNow"").addClass('booking-hide-button');

                            
                        }
                        reject('failed')
                    }

                    //IF THERE IS NO QUANTITIES WE NEVER WANT TO ENABLE THE CHECK AVAIL BUTTON
                    isQuantityEntered = checkBookingQty(hasLiveAvailWithBooking);
                    $('.priceReview').addClass('booking-hide-button');

                    if (!isQuantityEntered) {
                        $(""#btn_CheckAvailability"").removeClass('disabled');
                        $(""#btn_BookNow"").removeClass('disabled');
                        $(""#btn_BookGiftcard"").removeClass('disabled');
                        $(""#btn_BookNow"").addClass('booking-hide-button');
                    } else {
                        $(""#btn_CheckAvailability"").addClass('disabled');
                        $(""#btn_BookNow"").addClass('disabled');
                        $(""#btn_BookGiftcard"").addClass('disabled');
                    }


                    if (avail && avail['pax_avail'] && parseInt(avail['pax_avail']) > 0) {
                        $(""#btn_BookNow"").removeClass('booking-hide-button');
                    }

                });

                request.fail(function (response) {
                    if (x !== true && typeofaction == 'check') {
                        $(""#btn_CheckAvailability"").removeClass('booking-hide-button').removeClass('disabled');
                        $(""#btn_BookNow"").addClass('booking-hide-button');

                    } else if (x !== true && typeofaction == 'booking') {

                        
                        $(""#btn_CheckAvailability"").addClass('booking-hide-button').removeClass('disabled');
                        $(""#btn_BookNow"").addClass('booking-hide-button').addClass('disabled');

                                            }
                    reject(response.statusText)
                });

            })

        }


        // function called when check/giftcard/book button clicked
        function navigate(action) {


            if (action == 'check') {
                var button = 'btn_CheckAvailability';
            } else if (action == 'giftcard') {
                var button = 'btn_giftCard';
            }

            // oliver intercept
            var liveAvail = $('#liveAvail').val();
            var ack = $('#ack:checked').val();

            if (button == 'btn_CheckAvailability') {
                $(""#pricingform"").attr(""action"", siteUrl + ""availability/check"");
            } else {
                //$(""#pricingform"").attr(""action"", siteUrl + ""booking/create"");
            }
            if (button == 'btn_giftCard') {
                $(""#pricingform"").attr(""action"", siteUrl + ""booking/createGiftCard"");
                $(""#btn_BookNow"").addClass(""booking-hide-button"");
                $("".booking-title-book"").addClass(""booking-hide-button"");
                $(""#btn_CheckAvailability"").addClass(""booking-hide-button"");
                $("".booking-title-check"").addClass(""booking-hide-button"");
                $("".booking-title-book"").addClass(""booking-hide-button"");
                $("".travel-on"").addClass(""booking-hide-button"");
                $("".booking-title-gift"").removeClass(""booking-hide-button"");
                $(""#btn_BookGiftcard"").removeClass(""booking-hide-button"");

            } else {

                
                if (button == 'btn_CheckAvailability') {
                    $(""#pricingform"").attr(""data-button"", button)
                } else {
                    $(""#pricingform"").attr(""data-button"", '')
                }

                $(""#btn_BookGiftcard"").addClass(""booking-hide-button"");
                $(""#btn_BookNow"").addClass(""disabled"");
                $(""#btn_CheckAvailability"").removeClass('booking-hide-button').removeClass('disabled');

                            }

            $(""#pricingform"").submit();
        }

        //FUNCTION RUNNING EVERY TIME A QUANTITY IS CHANGED
        function checkBookingQty(e) {

            $('#resulttext').html('');
            $('.isAvailableLabel').addClass('booking-hide-button');
            var isNull = true;
            var counter = 0;
            //HIDE THE BOOK BUTTON BECAUSE WE HAVE CHANGED QUANTITIES AND NEED TO RECHECK
            if (hasLiveAvailWithBooking) {
                $('#btn_BookNow').addClass('booking-hide-button');
                $('#btn_CheckAvailability').removeClass('booking-hide-button');
            }
                        $('.availNote').removeClass('booking-hide-button');
                        $('.priceReview').addClass('booking-hide-button');


            document.getElementById(""results_row"").innerHTML = '';
            document.getElementById(""bookingTickets"").innerHTML = '';

            //SETUP THE GIFTCARD SCREEN AND REVIEW BOX WITH QUANTITIES
            $('.item-booking-qty').each(function () {
                var no = parseInt($(this).val());
                if (!isNaN(no) && no > 0) {
                    isNull = false;
                    //add the divs to the modal
                    var checkout_qty_node = document.createElement(""h3"");
                    var review_qty_node = document.createElement(""p"");

                    checkout_qty_node.className = ""checkout_qty"";
                    review_qty_node.className = ""review_qty"";

                    var textnodeCheckout = document.createTextNode(parseInt($(this).val()) + ' x ' + $('#product' + counter).val());
                    var textnodeReview = document.createTextNode(parseInt($(this).val()) + ' x ' + $('#product' + counter).val() + "" @ $"" + $('#sell' + counter).val() + ' Per ' + $('#priceType' + counter).val());

                    checkout_qty_node.appendChild(textnodeCheckout);
                    review_qty_node.appendChild(textnodeReview);

                    document.getElementById(""results_row"").appendChild(checkout_qty_node);
                    document.getElementById(""bookingTickets"").appendChild(review_qty_node);
                }
                counter++;

            });

            if ($('#depdate').val() == '' && $("".booking-title-gift"").hasClass(""booking-hide-button"")) {
                isNull = true;
            }

            if (isNull) {
                $('#btn_CheckAvailability, #btn_BookNow, #btn_BookGiftcard').addClass('disabled');
            } else {
                $('#btn_CheckAvailability, #btn_BookNow, #btn_BookGiftcard').removeClass('disabled');
            }
            return isNull;
        }


        $(document).ready(function () {


            $('#btn_CheckAvailability').on('click', function (event) {
                navigate('check');
            });

            $('#btn_BookNow').on('click', function (event) {
                navigate('booknow');
            });

            $('#btn_BookGiftcard_Checkout').on('click', function (event) {
                navigate('giftcard');
            });


            //MAIN CALENDAR FUNCTION STARTS HERE FOR PRODUCTS WITH LIVE CHECKING FROM MANIFEST
            var productDatesArray = [{""available"":3,""starter"":""2025-12-22"",""ender"":""2025-12-22"",""operatorid"":48},{""available"":1,""starter"":""2025-12-23"",""ender"":""2025-12-23"",""operatorid"":48},{""available"":1,""starter"":""2025-12-24"",""ender"":""2025-12-24"",""operatorid"":48},{""available"":35,""starter"":""2025-12-25"",""ender"":""2025-12-25"",""operatorid"":48},{""available"":10,""starter"":""2025-12-26"",""ender"":""2025-12-26"",""operatorid"":48},{""available"":5,""starter"":""2025-12-27"",""ender"":""2025-12-27"",""operatorid"":48},{""available"":17,""starter"":""2025-12-28"",""ender"":""2025-12-28"",""operatorid"":48},{""available"":13,""starter"":""2025-12-29"",""ender"":""2025-12-29"",""operatorid"":48},{""available"":0,""starter"":""2025-12-30"",""ender"":""2025-12-30"",""operatorid"":48},{""available"":31,""starter"":""2025-12-31"",""ender"":""2025-12-31"",""operatorid"":48},{""available"":29,""starter"":""2026-01-01"",""ender"":""2026-01-01"",""operatorid"":48},{""available"":17,""starter"":""2026-01-02"",""ender"":""2026-01-02"",""operatorid"":48},{""available"":28,""starter"":""2026-01-03"",""ender"":""2026-01-03"",""operatorid"":48},{""available"":31,""starter"":""2026-01-04"",""ender"":""2026-01-04"",""operatorid"":48},{""available"":31,""starter"":""2026-01-05"",""ender"":""2026-01-05"",""operatorid"":48},{""available"":31,""starter"":""2026-01-06"",""ender"":""2026-01-06"",""operatorid"":48},{""available"":0,""starter"":""2026-01-07"",""ender"":""2026-01-07"",""operatorid"":48},{""available"":31,""starter"":""2026-01-08"",""ender"":""2026-01-08"",""operatorid"":48},{""available"":3,""starter"":""2026-01-09"",""ender"":""2026-01-09"",""operatorid"":48},{""available"":0,""starter"":""2026-01-10"",""ender"":""2026-01-10"",""operatorid"":48},{""available"":35,""starter"":""2026-01-11"",""ender"":""2026-01-11"",""operatorid"":48},{""available"":31,""starter"":""2026-01-12"",""ender"":""2026-01-12"",""operatorid"":48},{""available"":26,""starter"":""2026-01-13"",""ender"":""2026-01-13"",""operatorid"":48},{""available"":32,""starter"":""2026-01-14"",""ender"":""2026-01-14"",""operatorid"":48},{""available"":30,""starter"":""2026-01-15"",""ender"":""2026-01-15"",""operatorid"":48},{""available"":31,""starter"":""2026-01-16"",""ender"":""2026-01-16"",""operatorid"":48},{""available"":31,""starter"":""2026-01-17"",""ender"":""2026-01-17"",""operatorid"":48},{""available"":6,""starter"":""2026-01-18"",""ender"":""2026-01-18"",""operatorid"":48},{""available"":0,""starter"":""2026-01-19"",""ender"":""2026-01-19"",""operatorid"":48},{""available"":0,""starter"":""2026-01-20"",""ender"":""2026-01-20"",""operatorid"":48},{""available"":12,""starter"":""2026-01-21"",""ender"":""2026-01-21"",""operatorid"":48},{""available"":6,""starter"":""2026-01-22"",""ender"":""2026-01-22"",""operatorid"":48},{""available"":6,""starter"":""2026-01-23"",""ender"":""2026-01-23"",""operatorid"":48},{""available"":33,""starter"":""2026-01-24"",""ender"":""2026-01-24"",""operatorid"":48},{""available"":12,""starter"":""2026-01-25"",""ender"":""2026-01-25"",""operatorid"":48},{""available"":35,""starter"":""2026-01-26"",""ender"":""2026-01-26"",""operatorid"":48},{""available"":33,""starter"":""2026-01-27"",""ender"":""2026-01-27"",""operatorid"":48},{""available"":33,""starter"":""2026-01-28"",""ender"":""2026-01-28"",""operatorid"":48},{""available"":35,""starter"":""2026-01-29"",""ender"":""2026-01-29"",""operatorid"":48},{""available"":34,""starter"":""2026-01-30"",""ender"":""2026-01-30"",""operatorid"":48},{""available"":33,""starter"":""2026-01-31"",""ender"":""2026-01-31"",""operatorid"":48},{""available"":35,""starter"":""2026-02-01"",""ender"":""2026-02-01"",""operatorid"":48},{""available"":35,""starter"":""2026-02-02"",""ender"":""2026-02-02"",""operatorid"":48},{""available"":35,""starter"":""2026-02-03"",""ender"":""2026-02-03"",""operatorid"":48},{""available"":33,""starter"":""2026-02-04"",""ender"":""2026-02-04"",""operatorid"":48},{""available"":35,""starter"":""2026-02-05"",""ender"":""2026-02-05"",""operatorid"":48},{""available"":35,""starter"":""2026-02-06"",""ender"":""2026-02-06"",""operatorid"":48},{""available"":35,""starter"":""2026-02-07"",""ender"":""2026-02-07"",""operatorid"":48},{""available"":35,""starter"":""2026-02-08"",""ender"":""2026-02-08"",""operatorid"":48},{""available"":24,""starter"":""2026-02-09"",""ender"":""2026-02-09"",""operatorid"":48},{""available"":35,""starter"":""2026-02-10"",""ender"":""2026-02-10"",""operatorid"":48},{""available"":35,""starter"":""2026-02-11"",""ender"":""2026-02-11"",""operatorid"":48},{""available"":33,""starter"":""2026-02-12"",""ender"":""2026-02-12"",""operatorid"":48},{""available"":35,""starter"":""2026-02-13"",""ender"":""2026-02-13"",""operatorid"":48},{""available"":35,""starter"":""2026-02-14"",""ender"":""2026-02-14"",""operatorid"":48},{""available"":35,""starter"":""2026-02-15"",""ender"":""2026-02-15"",""operatorid"":48},{""available"":35,""starter"":""2026-02-16"",""ender"":""2026-02-16"",""operatorid"":48},{""available"":35,""starter"":""2026-02-17"",""ender"":""2026-02-17"",""operatorid"":48},{""available"":33,""starter"":""2026-02-18"",""ender"":""2026-02-18"",""operatorid"":48},{""available"":35,""starter"":""2026-02-19"",""ender"":""2026-02-19"",""operatorid"":48},{""available"":35,""starter"":""2026-02-20"",""ender"":""2026-02-20"",""operatorid"":48},{""available"":35,""starter"":""2026-02-21"",""ender"":""2026-02-21"",""operatorid"":48},{""available"":35,""starter"":""2026-02-22"",""ender"":""2026-02-22"",""operatorid"":48},{""available"":33,""starter"":""2026-02-23"",""ender"":""2026-02-23"",""operatorid"":48},{""available"":33,""starter"":""2026-02-24"",""ender"":""2026-02-24"",""operatorid"":48},{""available"":35,""starter"":""2026-02-25"",""ender"":""2026-02-25"",""operatorid"":48},{""available"":27,""starter"":""2026-02-26"",""ender"":""2026-02-26"",""operatorid"":48},{""available"":33,""starter"":""2026-02-27"",""ender"":""2026-02-27"",""operatorid"":48},{""available"":35,""starter"":""2026-02-28"",""ender"":""2026-02-28"",""operatorid"":48},{""available"":35,""starter"":""2026-03-01"",""ender"":""2026-03-01"",""operatorid"":48},{""available"":33,""starter"":""2026-03-02"",""ender"":""2026-03-02"",""operatorid"":48},{""available"":35,""starter"":""2026-03-03"",""ender"":""2026-03-03"",""operatorid"":48},{""available"":31,""starter"":""2026-03-04"",""ender"":""2026-03-04"",""operatorid"":48},{""available"":32,""starter"":""2026-03-05"",""ender"":""2026-03-05"",""operatorid"":48},{""available"":33,""starter"":""2026-03-06"",""ender"":""2026-03-06"",""operatorid"":48},{""available"":35,""starter"":""2026-03-07"",""ender"":""2026-03-07"",""operatorid"":48},{""available"":35,""starter"":""2026-03-08"",""ender"":""2026-03-08"",""operatorid"":48},{""available"":35,""starter"":""2026-03-09"",""ender"":""2026-03-09"",""operatorid"":48},{""available"":33,""starter"":""2026-03-10"",""ender"":""2026-03-10"",""operatorid"":48},{""available"":29,""starter"":""2026-03-11"",""ender"":""2026-03-11"",""operatorid"":48},{""available"":35,""starter"":""2026-03-12"",""ender"":""2026-03-12"",""operatorid"":48},{""available"":35,""starter"":""2026-03-13"",""ender"":""2026-03-13"",""operatorid"":48},{""available"":35,""starter"":""2026-03-14"",""ender"":""2026-03-14"",""operatorid"":48},{""available"":35,""starter"":""2026-03-15"",""ender"":""2026-03-15"",""operatorid"":48},{""available"":35,""starter"":""2026-03-16"",""ender"":""2026-03-16"",""operatorid"":48},{""available"":35,""starter"":""2026-03-17"",""ender"":""2026-03-17"",""operatorid"":48},{""available"":35,""starter"":""2026-03-18"",""ender"":""2026-03-18"",""operatorid"":48},{""available"":35,""starter"":""2026-03-19"",""ender"":""2026-03-19"",""operatorid"":48},{""available"":29,""starter"":""2026-03-20"",""ender"":""2026-03-20"",""operatorid"":48},{""available"":35,""starter"":""2026-03-21"",""ender"":""2026-03-21"",""operatorid"":48},{""available"":35,""starter"":""2026-03-22"",""ender"":""2026-03-22"",""operatorid"":48},{""available"":31,""starter"":""2026-03-23"",""ender"":""2026-03-23"",""operatorid"":48},{""available"":35,""starter"":""2026-03-24"",""ender"":""2026-03-24"",""operatorid"":48},{""available"":33,""starter"":""2026-03-25"",""ender"":""2026-03-25"",""operatorid"":48},{""available"":35,""starter"":""2026-03-26"",""ender"":""2026-03-26"",""operatorid"":48},{""available"":35,""starter"":""2026-03-27"",""ender"":""2026-03-27"",""operatorid"":48},{""available"":35,""starter"":""2026-03-28"",""ender"":""2026-03-28"",""operatorid"":48},{""available"":35,""starter"":""2026-03-29"",""ender"":""2026-03-29"",""operatorid"":48},{""available"":35,""starter"":""2026-03-30"",""ender"":""2026-03-30"",""operatorid"":48},{""available"":35,""starter"":""2026-03-31"",""ender"":""2026-03-31"",""operatorid"":48},{""available"":35,""starter"":""2026-04-01"",""ender"":""2026-04-01"",""operatorid"":48},{""available"":35,""starter"":""2026-04-02"",""ender"":""2026-04-02"",""operatorid"":48},{""available"":33,""starter"":""2026-04-03"",""ender"":""2026-04-03"",""operatorid"":48},{""available"":32,""starter"":""2026-04-04"",""ender"":""2026-04-04"",""operatorid"":48},{""available"":35,""starter"":""2026-04-05"",""ender"":""2026-04-05"",""operatorid"":48},{""available"":35,""starter"":""2026-04-06"",""ender"":""2026-04-06"",""operatorid"":48},{""available"":35,""starter"":""2026-04-07"",""ender"":""2026-04-07"",""operatorid"":48},{""available"":35,""starter"":""2026-04-08"",""ender"":""2026-04-08"",""operatorid"":48},{""available"":35,""starter"":""2026-04-09"",""ender"":""2026-04-09"",""operatorid"":48},{""available"":35,""starter"":""2026-04-10"",""ender"":""2026-04-10"",""operatorid"":48},{""available"":35,""starter"":""2026-04-11"",""ender"":""2026-04-11"",""operatorid"":48},{""available"":35,""starter"":""2026-04-12"",""ender"":""2026-04-12"",""operatorid"":48},{""available"":29,""starter"":""2026-04-13"",""ender"":""2026-04-13"",""operatorid"":48},{""available"":35,""starter"":""2026-04-14"",""ender"":""2026-04-14"",""operatorid"":48},{""available"":35,""starter"":""2026-04-15"",""ender"":""2026-04-15"",""operatorid"":48},{""available"":35,""starter"":""2026-04-16"",""ender"":""2026-04-16"",""operatorid"":48},{""available"":35,""starter"":""2026-04-17"",""ender"":""2026-04-17"",""operatorid"":48},{""available"":35,""starter"":""2026-04-18"",""ender"":""2026-04-18"",""operatorid"":48},{""available"":35,""starter"":""2026-04-19"",""ender"":""2026-04-19"",""operatorid"":48},{""available"":35,""starter"":""2026-04-20"",""ender"":""2026-04-20"",""operatorid"":48},{""available"":35,""starter"":""2026-04-21"",""ender"":""2026-04-21"",""operatorid"":48},{""available"":35,""starter"":""2026-04-22"",""ender"":""2026-04-22"",""operatorid"":48},{""available"":35,""starter"":""2026-04-23"",""ender"":""2026-04-23"",""operatorid"":48},{""available"":35,""starter"":""2026-04-24"",""ender"":""2026-04-24"",""operatorid"":48},{""available"":35,""starter"":""2026-04-25"",""ender"":""2026-04-25"",""operatorid"":48},{""available"":35,""starter"":""2026-04-26"",""ender"":""2026-04-26"",""operatorid"":48},{""available"":35,""starter"":""2026-04-27"",""ender"":""2026-04-27"",""operatorid"":48},{""available"":35,""starter"":""2026-04-28"",""ender"":""2026-04-28"",""operatorid"":48},{""available"":35,""starter"":""2026-04-29"",""ender"":""2026-04-29"",""operatorid"":48},{""available"":35,""starter"":""2026-04-30"",""ender"":""2026-04-30"",""operatorid"":48},{""available"":35,""starter"":""2026-05-01"",""ender"":""2026-05-01"",""operatorid"":48},{""available"":35,""starter"":""2026-05-02"",""ender"":""2026-05-02"",""operatorid"":48},{""available"":35,""starter"":""2026-05-03"",""ender"":""2026-05-03"",""operatorid"":48},{""available"":35,""starter"":""2026-05-04"",""ender"":""2026-05-04"",""operatorid"":48},{""available"":35,""starter"":""2026-05-05"",""ender"":""2026-05-05"",""operatorid"":48},{""available"":35,""starter"":""2026-05-06"",""ender"":""2026-05-06"",""operatorid"":48},{""available"":35,""starter"":""2026-05-07"",""ender"":""2026-05-07"",""operatorid"":48},{""available"":35,""starter"":""2026-05-08"",""ender"":""2026-05-08"",""operatorid"":48},{""available"":35,""starter"":""2026-05-09"",""ender"":""2026-05-09"",""operatorid"":48},{""available"":35,""starter"":""2026-05-10"",""ender"":""2026-05-10"",""operatorid"":48},{""available"":35,""starter"":""2026-05-11"",""ender"":""2026-05-11"",""operatorid"":48},{""available"":35,""starter"":""2026-05-12"",""ender"":""2026-05-12"",""operatorid"":48},{""available"":35,""starter"":""2026-05-13"",""ender"":""2026-05-13"",""operatorid"":48},{""available"":35,""starter"":""2026-05-14"",""ender"":""2026-05-14"",""operatorid"":48},{""available"":35,""starter"":""2026-05-15"",""ender"":""2026-05-15"",""operatorid"":48},{""available"":35,""starter"":""2026-05-16"",""ender"":""2026-05-16"",""operatorid"":48},{""available"":35,""starter"":""2026-05-17"",""ender"":""2026-05-17"",""operatorid"":48},{""available"":35,""starter"":""2026-05-18"",""ender"":""2026-05-18"",""operatorid"":48},{""available"":35,""starter"":""2026-05-19"",""ender"":""2026-05-19"",""operatorid"":48},{""available"":35,""starter"":""2026-05-20"",""ender"":""2026-05-20"",""operatorid"":48},{""available"":35,""starter"":""2026-05-21"",""ender"":""2026-05-21"",""operatorid"":48},{""available"":35,""starter"":""2026-05-22"",""ender"":""2026-05-22"",""operatorid"":48},{""available"":35,""starter"":""2026-05-23"",""ender"":""2026-05-23"",""operatorid"":48},{""available"":35,""starter"":""2026-05-24"",""ender"":""2026-05-24"",""operatorid"":48},{""available"":35,""starter"":""2026-05-25"",""ender"":""2026-05-25"",""operatorid"":48},{""available"":35,""starter"":""2026-05-26"",""ender"":""2026-05-26"",""operatorid"":48},{""available"":32,""starter"":""2026-05-27"",""ender"":""2026-05-27"",""operatorid"":48},{""available"":35,""starter"":""2026-05-28"",""ender"":""2026-05-28"",""operatorid"":48},{""available"":35,""starter"":""2026-05-29"",""ender"":""2026-05-29"",""operatorid"":48},{""available"":35,""starter"":""2026-05-30"",""ender"":""2026-05-30"",""operatorid"":48},{""available"":35,""starter"":""2026-05-31"",""ender"":""2026-05-31"",""operatorid"":48},{""available"":35,""starter"":""2026-06-01"",""ender"":""2026-06-01"",""operatorid"":48},{""available"":35,""starter"":""2026-06-02"",""ender"":""2026-06-02"",""operatorid"":48},{""available"":35,""starter"":""2026-06-03"",""ender"":""2026-06-03"",""operatorid"":48},{""available"":35,""starter"":""2026-06-04"",""ender"":""2026-06-04"",""operatorid"":48},{""available"":35,""starter"":""2026-06-05"",""ender"":""2026-06-05"",""operatorid"":48},{""available"":35,""starter"":""2026-06-06"",""ender"":""2026-06-06"",""operatorid"":48},{""available"":35,""starter"":""2026-06-07"",""ender"":""2026-06-07"",""operatorid"":48},{""available"":35,""starter"":""2026-06-08"",""ender"":""2026-06-08"",""operatorid"":48},{""available"":35,""starter"":""2026-06-09"",""ender"":""2026-06-09"",""operatorid"":48},{""available"":35,""starter"":""2026-06-10"",""ender"":""2026-06-10"",""operatorid"":48},{""available"":35,""starter"":""2026-06-11"",""ender"":""2026-06-11"",""operatorid"":48},{""available"":35,""starter"":""2026-06-12"",""ender"":""2026-06-12"",""operatorid"":48},{""available"":35,""starter"":""2026-06-13"",""ender"":""2026-06-13"",""operatorid"":48},{""available"":35,""starter"":""2026-06-14"",""ender"":""2026-06-14"",""operatorid"":48},{""available"":35,""starter"":""2026-06-15"",""ender"":""2026-06-15"",""operatorid"":48},{""available"":35,""starter"":""2026-06-16"",""ender"":""2026-06-16"",""operatorid"":48},{""available"":35,""starter"":""2026-06-17"",""ender"":""2026-06-17"",""operatorid"":48},{""available"":35,""starter"":""2026-06-18"",""ender"":""2026-06-18"",""operatorid"":48},{""available"":35,""starter"":""2026-06-19"",""ender"":""2026-06-19"",""operatorid"":48},{""available"":35,""starter"":""2026-06-20"",""ender"":""2026-06-20"",""operatorid"":48},{""available"":35,""starter"":""2026-06-21"",""ender"":""2026-06-21"",""operatorid"":48},{""available"":35,""starter"":""2026-06-22"",""ender"":""2026-06-22"",""operatorid"":48},{""available"":35,""starter"":""2026-06-23"",""ender"":""2026-06-23"",""operatorid"":48},{""available"":35,""starter"":""2026-06-24"",""ender"":""2026-06-24"",""operatorid"":48},{""available"":35,""starter"":""2026-06-25"",""ender"":""2026-06-25"",""operatorid"":48},{""available"":35,""starter"":""2026-06-26"",""ender"":""2026-06-26"",""operatorid"":48},{""available"":35,""starter"":""2026-06-27"",""ender"":""2026-06-27"",""operatorid"":48},{""available"":35,""starter"":""2026-06-28"",""ender"":""2026-06-28"",""operatorid"":48},{""available"":35,""starter"":""2026-06-29"",""ender"":""2026-06-29"",""operatorid"":48},{""available"":35,""starter"":""2026-06-30"",""ender"":""2026-06-30"",""operatorid"":48},{""available"":35,""starter"":""2026-07-01"",""ender"":""2026-07-01"",""operatorid"":48},{""available"":35,""starter"":""2026-07-02"",""ender"":""2026-07-02"",""operatorid"":48},{""available"":35,""starter"":""2026-07-03"",""ender"":""2026-07-03"",""operatorid"":48},{""available"":35,""starter"":""2026-07-04"",""ender"":""2026-07-04"",""operatorid"":48},{""available"":35,""starter"":""2026-07-05"",""ender"":""2026-07-05"",""operatorid"":48},{""available"":35,""starter"":""2026-07-06"",""ender"":""2026-07-06"",""operatorid"":48},{""available"":35,""starter"":""2026-07-07"",""ender"":""2026-07-07"",""operatorid"":48},{""available"":35,""starter"":""2026-07-08"",""ender"":""2026-07-08"",""operatorid"":48},{""available"":35,""starter"":""2026-07-09"",""ender"":""2026-07-09"",""operatorid"":48},{""available"":35,""starter"":""2026-07-10"",""ender"":""2026-07-10"",""operatorid"":48},{""available"":35,""starter"":""2026-07-11"",""ender"":""2026-07-11"",""operatorid"":48},{""available"":35,""starter"":""2026-07-12"",""ender"":""2026-07-12"",""operatorid"":48},{""available"":35,""starter"":""2026-07-13"",""ender"":""2026-07-13"",""operatorid"":48},{""available"":35,""starter"":""2026-07-14"",""ender"":""2026-07-14"",""operatorid"":48},{""available"":34,""starter"":""2026-07-15"",""ender"":""2026-07-15"",""operatorid"":48},{""available"":35,""starter"":""2026-07-16"",""ender"":""2026-07-16"",""operatorid"":48},{""available"":35,""starter"":""2026-07-17"",""ender"":""2026-07-17"",""operatorid"":48},{""available"":35,""starter"":""2026-07-18"",""ender"":""2026-07-18"",""operatorid"":48},{""available"":35,""starter"":""2026-07-19"",""ender"":""2026-07-19"",""operatorid"":48},{""available"":35,""starter"":""2026-07-20"",""ender"":""2026-07-20"",""operatorid"":48},{""available"":35,""starter"":""2026-07-21"",""ender"":""2026-07-21"",""operatorid"":48},{""available"":35,""starter"":""2026-07-22"",""ender"":""2026-07-22"",""operatorid"":48},{""available"":35,""starter"":""2026-07-23"",""ender"":""2026-07-23"",""operatorid"":48},{""available"":35,""starter"":""2026-07-24"",""ender"":""2026-07-24"",""operatorid"":48},{""available"":35,""starter"":""2026-07-25"",""ender"":""2026-07-25"",""operatorid"":48},{""available"":35,""starter"":""2026-07-26"",""ender"":""2026-07-26"",""operatorid"":48},{""available"":35,""starter"":""2026-07-27"",""ender"":""2026-07-27"",""operatorid"":48},{""available"":33,""starter"":""2026-07-28"",""ender"":""2026-07-28"",""operatorid"":48},{""available"":35,""starter"":""2026-07-29"",""ender"":""2026-07-29"",""operatorid"":48},{""available"":35,""starter"":""2026-07-30"",""ender"":""2026-07-30"",""operatorid"":48},{""available"":35,""starter"":""2026-07-31"",""ender"":""2026-07-31"",""operatorid"":48},{""available"":35,""starter"":""2026-08-01"",""ender"":""2026-08-01"",""operatorid"":48},{""available"":35,""starter"":""2026-08-02"",""ender"":""2026-08-02"",""operatorid"":48},{""available"":35,""starter"":""2026-08-03"",""ender"":""2026-08-03"",""operatorid"":48},{""available"":35,""starter"":""2026-08-04"",""ender"":""2026-08-04"",""operatorid"":48},{""available"":35,""starter"":""2026-08-05"",""ender"":""2026-08-05"",""operatorid"":48},{""available"":35,""starter"":""2026-08-06"",""ender"":""2026-08-06"",""operatorid"":48},{""available"":35,""starter"":""2026-08-07"",""ender"":""2026-08-07"",""operatorid"":48},{""available"":35,""starter"":""2026-08-08"",""ender"":""2026-08-08"",""operatorid"":48},{""available"":35,""starter"":""2026-08-09"",""ender"":""2026-08-09"",""operatorid"":48},{""available"":35,""starter"":""2026-08-10"",""ender"":""2026-08-10"",""operatorid"":48},{""available"":35,""starter"":""2026-08-11"",""ender"":""2026-08-11"",""operatorid"":48},{""available"":35,""starter"":""2026-08-12"",""ender"":""2026-08-12"",""operatorid"":48},{""available"":35,""starter"":""2026-08-13"",""ender"":""2026-08-13"",""operatorid"":48},{""available"":35,""starter"":""2026-08-14"",""ender"":""2026-08-14"",""operatorid"":48},{""available"":35,""starter"":""2026-08-15"",""ender"":""2026-08-15"",""operatorid"":48},{""available"":35,""starter"":""2026-08-16"",""ender"":""2026-08-16"",""operatorid"":48},{""available"":35,""starter"":""2026-08-17"",""ender"":""2026-08-17"",""operatorid"":48},{""available"":35,""starter"":""2026-08-18"",""ender"":""2026-08-18"",""operatorid"":48},{""available"":35,""starter"":""2026-08-19"",""ender"":""2026-08-19"",""operatorid"":48},{""available"":35,""starter"":""2026-08-20"",""ender"":""2026-08-20"",""operatorid"":48},{""available"":35,""starter"":""2026-08-21"",""ender"":""2026-08-21"",""operatorid"":48},{""available"":35,""starter"":""2026-08-22"",""ender"":""2026-08-22"",""operatorid"":48},{""available"":35,""starter"":""2026-08-23"",""ender"":""2026-08-23"",""operatorid"":48},{""available"":35,""starter"":""2026-08-24"",""ender"":""2026-08-24"",""operatorid"":48},{""available"":35,""starter"":""2026-08-25"",""ender"":""2026-08-25"",""operatorid"":48},{""available"":35,""starter"":""2026-08-26"",""ender"":""2026-08-26"",""operatorid"":48},{""available"":35,""starter"":""2026-08-27"",""ender"":""2026-08-27"",""operatorid"":48},{""available"":35,""starter"":""2026-08-28"",""ender"":""2026-08-28"",""operatorid"":48},{""available"":35,""starter"":""2026-08-29"",""ender"":""2026-08-29"",""operatorid"":48},{""available"":35,""starter"":""2026-08-30"",""ender"":""2026-08-30"",""operatorid"":48},{""available"":35,""starter"":""2026-08-31"",""ender"":""2026-08-31"",""operatorid"":48},{""available"":35,""starter"":""2026-09-01"",""ender"":""2026-09-01"",""operatorid"":48},{""available"":35,""starter"":""2026-09-02"",""ender"":""2026-09-02"",""operatorid"":48},{""available"":35,""starter"":""2026-09-03"",""ender"":""2026-09-03"",""operatorid"":48},{""available"":35,""starter"":""2026-09-04"",""ender"":""2026-09-04"",""operatorid"":48},{""available"":35,""starter"":""2026-09-05"",""ender"":""2026-09-05"",""operatorid"":48},{""available"":35,""starter"":""2026-09-06"",""ender"":""2026-09-06"",""operatorid"":48},{""available"":35,""starter"":""2026-09-07"",""ender"":""2026-09-07"",""operatorid"":48},{""available"":35,""starter"":""2026-09-08"",""ender"":""2026-09-08"",""operatorid"":48},{""available"":35,""starter"":""2026-09-09"",""ender"":""2026-09-09"",""operatorid"":48},{""available"":35,""starter"":""2026-09-10"",""ender"":""2026-09-10"",""operatorid"":48},{""available"":35,""starter"":""2026-09-11"",""ender"":""2026-09-11"",""operatorid"":48},{""available"":35,""starter"":""2026-09-12"",""ender"":""2026-09-12"",""operatorid"":48},{""available"":35,""starter"":""2026-09-13"",""ender"":""2026-09-13"",""operatorid"":48},{""available"":35,""starter"":""2026-09-14"",""ender"":""2026-09-14"",""operatorid"":48},{""available"":35,""starter"":""2026-09-15"",""ender"":""2026-09-15"",""operatorid"":48},{""available"":35,""starter"":""2026-09-16"",""ender"":""2026-09-16"",""operatorid"":48},{""available"":35,""starter"":""2026-09-17"",""ender"":""2026-09-17"",""operatorid"":48},{""available"":35,""starter"":""2026-09-18"",""ender"":""2026-09-18"",""operatorid"":48},{""available"":35,""starter"":""2026-09-19"",""ender"":""2026-09-19"",""operatorid"":48},{""available"":35,""starter"":""2026-09-20"",""ender"":""2026-09-20"",""operatorid"":48},{""available"":35,""starter"":""2026-09-21"",""ender"":""2026-09-21"",""operatorid"":48},{""available"":35,""starter"":""2026-09-22"",""ender"":""2026-09-22"",""operatorid"":48},{""available"":35,""starter"":""2026-09-23"",""ender"":""2026-09-23"",""operatorid"":48},{""available"":35,""starter"":""2026-09-24"",""ender"":""2026-09-24"",""operatorid"":48},{""available"":35,""starter"":""2026-09-25"",""ender"":""2026-09-25"",""operatorid"":48},{""available"":35,""starter"":""2026-09-26"",""ender"":""2026-09-26"",""operatorid"":48},{""available"":35,""starter"":""2026-09-27"",""ender"":""2026-09-27"",""operatorid"":48},{""available"":35,""starter"":""2026-09-28"",""ender"":""2026-09-28"",""operatorid"":48},{""available"":35,""starter"":""2026-09-29"",""ender"":""2026-09-29"",""operatorid"":48},{""available"":35,""starter"":""2026-09-30"",""ender"":""2026-09-30"",""operatorid"":48},{""available"":35,""starter"":""2026-10-01"",""ender"":""2026-10-01"",""operatorid"":48},{""available"":35,""starter"":""2026-10-02"",""ender"":""2026-10-02"",""operatorid"":48},{""available"":35,""starter"":""2026-10-03"",""ender"":""2026-10-03"",""operatorid"":48},{""available"":35,""starter"":""2026-10-04"",""ender"":""2026-10-04"",""operatorid"":48},{""available"":35,""starter"":""2026-10-05"",""ender"":""2026-10-05"",""operatorid"":48},{""available"":35,""starter"":""2026-10-06"",""ender"":""2026-10-06"",""operatorid"":48},{""available"":35,""starter"":""2026-10-07"",""ender"":""2026-10-07"",""operatorid"":48},{""available"":35,""starter"":""2026-10-08"",""ender"":""2026-10-08"",""operatorid"":48},{""available"":35,""starter"":""2026-10-09"",""ender"":""2026-10-09"",""operatorid"":48},{""available"":35,""starter"":""2026-10-10"",""ender"":""2026-10-10"",""operatorid"":48},{""available"":35,""starter"":""2026-10-11"",""ender"":""2026-10-11"",""operatorid"":48},{""available"":35,""starter"":""2026-10-12"",""ender"":""2026-10-12"",""operatorid"":48},{""available"":35,""starter"":""2026-10-13"",""ender"":""2026-10-13"",""operatorid"":48},{""available"":35,""starter"":""2026-10-14"",""ender"":""2026-10-14"",""operatorid"":48},{""available"":35,""starter"":""2026-10-15"",""ender"":""2026-10-15"",""operatorid"":48},{""available"":35,""starter"":""2026-10-16"",""ender"":""2026-10-16"",""operatorid"":48},{""available"":35,""starter"":""2026-10-17"",""ender"":""2026-10-17"",""operatorid"":48},{""available"":35,""starter"":""2026-10-18"",""ender"":""2026-10-18"",""operatorid"":48},{""available"":33,""starter"":""2026-10-19"",""ender"":""2026-10-19"",""operatorid"":48},{""available"":35,""starter"":""2026-10-20"",""ender"":""2026-10-20"",""operatorid"":48},{""available"":35,""starter"":""2026-10-21"",""ender"":""2026-10-21"",""operatorid"":48},{""available"":35,""starter"":""2026-10-22"",""ender"":""2026-10-22"",""operatorid"":48},{""available"":35,""starter"":""2026-10-23"",""ender"":""2026-10-23"",""operatorid"":48},{""available"":35,""starter"":""2026-10-24"",""ender"":""2026-10-24"",""operatorid"":48},{""available"":35,""starter"":""2026-10-25"",""ender"":""2026-10-25"",""operatorid"":48},{""available"":35,""starter"":""2026-10-26"",""ender"":""2026-10-26"",""operatorid"":48},{""available"":35,""starter"":""2026-10-27"",""ender"":""2026-10-27"",""operatorid"":48},{""available"":35,""starter"":""2026-10-28"",""ender"":""2026-10-28"",""operatorid"":48},{""available"":35,""starter"":""2026-10-29"",""ender"":""2026-10-29"",""operatorid"":48},{""available"":35,""starter"":""2026-10-30"",""ender"":""2026-10-30"",""operatorid"":48},{""available"":35,""starter"":""2026-10-31"",""ender"":""2026-10-31"",""operatorid"":48},{""available"":35,""starter"":""2026-11-01"",""ender"":""2026-11-01"",""operatorid"":48},{""available"":35,""starter"":""2026-11-02"",""ender"":""2026-11-02"",""operatorid"":48},{""available"":35,""starter"":""2026-11-03"",""ender"":""2026-11-03"",""operatorid"":48},{""available"":35,""starter"":""2026-11-04"",""ender"":""2026-11-04"",""operatorid"":48},{""available"":35,""starter"":""2026-11-05"",""ender"":""2026-11-05"",""operatorid"":48},{""available"":35,""starter"":""2026-11-06"",""ender"":""2026-11-06"",""operatorid"":48},{""available"":35,""starter"":""2026-11-07"",""ender"":""2026-11-07"",""operatorid"":48},{""available"":35,""starter"":""2026-11-08"",""ender"":""2026-11-08"",""operatorid"":48},{""available"":35,""starter"":""2026-11-09"",""ender"":""2026-11-09"",""operatorid"":48},{""available"":35,""starter"":""2026-11-10"",""ender"":""2026-11-10"",""operatorid"":48},{""available"":35,""starter"":""2026-11-11"",""ender"":""2026-11-11"",""operatorid"":48},{""available"":35,""starter"":""2026-11-12"",""ender"":""2026-11-12"",""operatorid"":48},{""available"":35,""starter"":""2026-11-13"",""ender"":""2026-11-13"",""operatorid"":48},{""available"":35,""starter"":""2026-11-14"",""ender"":""2026-11-14"",""operatorid"":48},{""available"":35,""starter"":""2026-11-15"",""ender"":""2026-11-15"",""operatorid"":48},{""available"":35,""starter"":""2026-11-16"",""ender"":""2026-11-16"",""operatorid"":48},{""available"":35,""starter"":""2026-11-17"",""ender"":""2026-11-17"",""operatorid"":48},{""available"":35,""starter"":""2026-11-18"",""ender"":""2026-11-18"",""operatorid"":48},{""available"":35,""starter"":""2026-11-19"",""ender"":""2026-11-19"",""operatorid"":48},{""available"":35,""starter"":""2026-11-20"",""ender"":""2026-11-20"",""operatorid"":48},{""available"":35,""starter"":""2026-11-21"",""ender"":""2026-11-21"",""operatorid"":48},{""available"":35,""starter"":""2026-11-22"",""ender"":""2026-11-22"",""operatorid"":48},{""available"":35,""starter"":""2026-11-23"",""ender"":""2026-11-23"",""operatorid"":48},{""available"":35,""starter"":""2026-11-24"",""ender"":""2026-11-24"",""operatorid"":48},{""available"":35,""starter"":""2026-11-25"",""ender"":""2026-11-25"",""operatorid"":48},{""available"":35,""starter"":""2026-11-26"",""ender"":""2026-11-26"",""operatorid"":48},{""available"":35,""starter"":""2026-11-27"",""ender"":""2026-11-27"",""operatorid"":48},{""available"":35,""starter"":""2026-11-28"",""ender"":""2026-11-28"",""operatorid"":48},{""available"":35,""starter"":""2026-11-29"",""ender"":""2026-11-29"",""operatorid"":48},{""available"":35,""starter"":""2026-11-30"",""ender"":""2026-11-30"",""operatorid"":48},{""available"":35,""starter"":""2026-12-01"",""ender"":""2026-12-01"",""operatorid"":48},{""available"":35,""starter"":""2026-12-02"",""ender"":""2026-12-02"",""operatorid"":48},{""available"":35,""starter"":""2026-12-03"",""ender"":""2026-12-03"",""operatorid"":48},{""available"":35,""starter"":""2026-12-04"",""ender"":""2026-12-04"",""operatorid"":48},{""available"":35,""starter"":""2026-12-05"",""ender"":""2026-12-05"",""operatorid"":48},{""available"":35,""starter"":""2026-12-06"",""ender"":""2026-12-06"",""operatorid"":48},{""available"":35,""starter"":""2026-12-07"",""ender"":""2026-12-07"",""operatorid"":48},{""available"":35,""starter"":""2026-12-08"",""ender"":""2026-12-08"",""operatorid"":48},{""available"":35,""starter"":""2026-12-09"",""ender"":""2026-12-09"",""operatorid"":48},{""available"":35,""starter"":""2026-12-10"",""ender"":""2026-12-10"",""operatorid"":48},{""available"":35,""starter"":""2026-12-11"",""ender"":""2026-12-11"",""operatorid"":48},{""available"":35,""starter"":""2026-12-12"",""ender"":""2026-12-12"",""operatorid"":48},{""available"":35,""starter"":""2026-12-13"",""ender"":""2026-12-13"",""operatorid"":48},{""available"":35,""starter"":""2026-12-14"",""ender"":""2026-12-14"",""operatorid"":48},{""available"":35,""starter"":""2026-12-15"",""ender"":""2026-12-15"",""operatorid"":48},{""available"":35,""starter"":""2026-12-16"",""ender"":""2026-12-16"",""operatorid"":48}];
            var startDays = [];
            var endDays = [];
            var availability = [];
            var counter = 0;
            var availabilityStr = '';
            var classname = '';
            var availabilityNum = '';
            //ITERATE OVER OBJECT KEYS AND SAVE INTO DIFFERENT ARRAYS TO USE LATER
            for (var i = 0; i < Object.keys(productDatesArray).length; i++) {
                startDays.push(productDatesArray[i]['starter']);
                endDays.push(productDatesArray[i]['ender']);
                availability.push(productDatesArray[i]['available']);
            }
            //OUR MAIN CALENDAR - FOR ALL PRODUCTS THAT HAVE LIVE MANIFEST DATES 
            //CLASS NAMES IN THE RETURN LINK TO CSS CLASSES WITH COLOR CODES
            $(function () {
                $("".calendar"").datepicker({
                    format: 'D dd M yyyy',
                    todayHighlight: true,
                    autoclose: true,
                    inline: true,
                    ignoreReadonly: true,
                    startDate: new Date(),

                    onChangeMonthYear: function (month, year, dp) {
                    },

                    beforeShowDay: function (date) {
                        if (startDays.indexOf(formatDate(date)) < 0) {

                            var selectable = false;
                            var classname = ""123"";
                            return {
                                enabled: selectable,
                                classes: classname,
                                tooltip: ""Not Available""
                            };

                        } else {

                            let availabilityNum = 0;

                            for (let i = 0; i < Object.keys(productDatesArray).length; i++) {
                                if (productDatesArray[i]['starter'] === formatDate(date)) {
                                    // we have to provide an additional check here because sometimes the same date exists twice in the database.
                                    // we need to make sure we are taking the version of the date with the highest availability
                                    if (productDatesArray[i]['available'] > availabilityNum) {
                                        availabilityNum = productDatesArray[i]['available'];
                                    }
                                }
                            }

                            var productID = 1049;

                            if (availabilityNum == 0) {
                                availabilityStr = ""Sold Out"";
                                classname = ""soldOut"";
                            }
                            // Very ugly check for products with less than 5 max availability (as we don't receive max availability data) - Getaway (2d2n/3d3n) and Pearl
                            else if (availabilityNum <= 5 && !(productID == 1469 || productID == 1472 || productID == 3291)) {
                                availabilityStr = ""Almost Gone!"";
                                classname = ""lowAvail"";
                            } else if (availabilityNum <= 2) {
                                availabilityStr = ""Almost Gone!"";
                                classname = ""lowAvail"";
                            } else {
                                availabilityStr = ""Spots Available!"";
                                classname = ""avail"";
                            }

                            var selectable = true;
                            return {
                                enabled: selectable,
                                classes: classname,
                                tooltip: availabilityStr
                            };
                        }
                    }


                }).attr(""readonly"", ""readonly"");
            });


            //THESE CALENDARS ARE FOR PRODUCTS WITHOUT LIVE DATE CHECKING
            //HOWEVER THESE PRODUCTS MAY STILL HAVE LIVE AVAILABILITY CHECKS
                    });


        //FUNCTION TO MATCH ARRAY LIVE DAYS TO CALENDAR DAYS
        function formatDate(d) {
            var day = String(d.getDate())
            //add leading zero if day is is single digit
            if (day.length == 1)
                day = '0' + day
            var month = String((d.getMonth() + 1))
            //add leading zero if month is is single digit
            if (month.length == 1)
                month = '0' + month
            return d.getFullYear() + ""-"" + month + ""-"" + day;

        }
$(function () {
            // olli -> cleaning up the mess

            // start status for the modal buttons
            $(""#btn_CheckAvailability"").removeClass('booking-hide-button').addClass('disabled');
            $('#btn_BookNow').addClass(""booking-hide-button"");
            $('#btn_BookGiftcard').addClass(""booking-hide-button"");
            $('.isAvailableLabel').addClass('booking-hide-button');

            // EVENT TRIGEGRS
            // change quantity fields
            $('#modal_booking_form').on('change', '.item-booking-qty', checkBookingQty);

            // click book now button and open modal
            $("".product-booknowbutton"").click(function () {
                $('#btn_BookGiftcard').addClass(""booking-hide-button"");
                // Hide all buttons when date not selected.
                // live booking is enabled
                                // date was already changed previous
                if ($('.col-quantity').length > 0) {
                    $(""#btn_CheckAvailability"").removeClass('booking-hide-button').removeClass('disabled');
                }
                
                // product options are already available, make sure button is enabled
                if ($('.col-quantity').length > 0) {
                    $(""#btn_BookNow"").removeClass('booking-hide-button').removeClass('disabled');
                } else {
                    $(""#btn_BookNow"").removeClass(""booking-hide-button"").addClass(""disabled"");
                }

                // Show/hide titles
                $("".booking-title-check"").addClass(""booking-hide-button"");
                $("".booking-title-gift"").addClass(""booking-hide-button"");
                $("".booking-title-book"").removeClass(""booking-hide-button"");
                $("".booking-title-check-offline"").addClass(""booking-hide-button"");
                $("".travel-on"").removeClass(""booking-hide-button"");
                $(""#view_pricing"").removeClass(""booking-hide-button"");
                $(""#pricingform"").attr(""do_action"", ""booking"");

                if ($('#depdate').val() == '') {
                                    }

            });

            // this is the Check Availability button that opens the modal window
            $("".product-checkbutton"").click(function () {
                hasLiveAvailWithBooking = true;
                //   $('#resulttext').html('');
                $('#btn_BookGiftcard').addClass(""booking-hide-button"");
                // Hide all buttons when date not selected.
                $("".booking-title-book"").addClass(""booking-hide-button"");
                $("".booking-title-gift"").addClass(""booking-hide-button"");

                                $("".booking-title-check"").removeClass(""booking-hide-button"");
                $("".booking-title-check-offline"").addClass(""booking-hide-button"");
                                //   $(""#btn_CheckAvailability"").removeClass('booking-hide-button').addClass('disabled');

                $(""#btn_BookNow"").addClass(""booking-hide-button"");
                $(""#btn_BookGiftcard"").addClass(""booking-hide-button"");
                $("".travel-on"").removeClass(""booking-hide-button"");
                checkBookingQty(hasLiveAvailWithBooking);

                //only do this if giftcard was selected last.
                if ($('#depdate').val() == '') {
                    $('#view_pricing').html(""<div class='select-date-please'><p>Please select a Date of Travel above to view product options.</p></div>"");
                }

                $(""#view_pricing"").removeClass(""booking-hide-button"");
                $(""#pricingform"").attr(""do_action"", ""check"");
            });

            // this is the Gift Card button that opens the modal window
            $("".product-giftcardbutton"").click(function () {
                $("".booking-title-gift"").removeClass(""booking-hide-button"");
                $(""#btn_BookNow"").addClass(""booking-hide-button"");
                $("".booking-title-book"").addClass(""booking-hide-button"");
                $(""#btn_CheckAvailability"").addClass(""booking-hide-button"");
                $("".booking-title-check"").addClass(""booking-hide-button"");
                $("".booking-title-check-offline"").addClass(""booking-hide-button"");
                $("".booking-title-book"").addClass(""booking-hide-button"");
                $("".travel-on"").addClass(""booking-hide-button"");
                $(""#view_pricing"").addClass(""booking-hide-button"");

                $("".booking-title-gift"").removeClass(""booking-hide-button"");
                $(""#btn_BookGiftcard"").removeClass(""booking-hide-button"");
                $(""#pricingform"").attr(""do_action"", ""giftcard"");

                enableSubmit()
                    .then(function (response) {
                    })

            });
            $(""#btn_BookGiftcard"").click(function () {
                var col = $('.col-quantity');
                var tempoption = 0;
                var qtySelected = false;

                col.each(function (index) {
                    tempoption = $('input[name^=""option[' + index + '][qty]""]').val();
                    if (tempoption > 0) {
                        qtySelected = true;
                    }
                })

                if (qtySelected) {
                    $('#myModal').modal('hide');
                    $('#checkoutModal').modal('show');
                    $('#resulttext').html('');
                } else {
                    $('#resulttext').html('Please Enter A Quantity...');
                }
            });


            if ($(""#pricingform"").attr(""do_action"") != ""giftcard"") {
                // remove red border from input box
                $('#ack').on('click', function () {
                    if ($(this).hasClass('roteZora')) {
                        $(this).removeClass('roteZora')
                    }
                })


                //BOOTSTRAP CALENDAR BUG FIX - SAVES LAST DATE SO WE DONT HIDE THE PRODUCT OPTIONS AGAIN
                $('.calendar').on('show', function (event) {
                    currentDate = $(this).datepicker('getFormattedDate');
                    
                    if ($("".datepicker-dropdown"").children("".keyDiv"").length == 0) {
                        $("".datepicker-dropdown"").append(""<div class='keyDiv'> </div>"");
                        $("".keyDiv"").append(""<div class='lowAvailKeyDiv'> <span class='box lowAvailBox'> </span> Almost Gone! </div>"");
                        $("".keyDiv"").append(""<div class='notAvailKeyDiv'> <span class='box notAvailBox'> </span>Not Available </div>"");
                    }
                                        $('.prev').html('&#xf137;');
                    $('.next').html('&#xf138;');
                    $('.next, .prev').css('font-family', ""'Font Awesome 5 Free'"");
                });

                $('.calendar').on('changeDate', function (event) {
                    var productid = $('#ProductID').val();

                    if ($(this).val() === '' || $(this).val() === null) {
                        $(this).val(currentDate).datepicker('update');
                    }

                    // olli fix to fill the hidden date field with correct formatted date
                    var currentDate = new Date($(this).val());
                    var dateWanted = moment(currentDate).format('YYYY-MM-DD');
                    $('#value-depdate').val(dateWanted);


                    $('#view_pricing').html('<div class=\""loaderblack\""></div>');

                    // call the function to process availability, kind of in review
                    enableSubmit()
                        .then(function (response) {
                        })
                });
            } else {
                // console.log($(""#pricingform"").attr(""do_action""));
            }

        })


        var dynamicCSSRules = [];

        function addCSSRule(rule) {
            if ($.inArray(rule, dynamicCSSRules) == -1) {
                $('head').append('<style>' + rule + '</style>');
                dynamicCSSRules.push(rule);
            }
        }
// current live availability
        $(function () {

            $('#toggler').on('click', function (event) {
                $('#toggle-details').toggle();
            });

            $('form#pricingform').on('submit', (event) => {
                $("".minus, .plus"").css(""pointer-events"", ""none"");
                $("".minus, .plus"").css(""opacity"", ""0.3"");

                var button = $('form#pricingform').attr('data-button');

                if (button == 'btn_CheckAvailability') {
                    event.preventDefault();
                    var id = $(this).find('#ProductID').val();
                    var depDateString = $('#depdate').val();
                    var depTime = $('#deptime').val() || '';
                    //CONVERT DATE BACK INTO FORMAT NEEDED FOR MANIFEST CHECK
                    var depDate = $('#depdate').datepicker('getFormattedDate', 'yyyy-mm-dd');
                    var salesagent = $('#salesagent').val();
                    var col = $('.col-quantity');
                    var options = [];
                    var tempoption;

                    col.each(function (index) {

                        tempoption = $('input[name^=""option[' + index + '][qty]""]').val();
                        optionid = $('input[name^=""option[' + index + '][optionid]""]').val();

                        if (optionid && id && parseInt(tempoption) > 0) {

                            let option = {};

                            option.productid = id;
                            option.salesagent = salesagent;
                            option.depDate = depDate;
                            option.depTime = depTime;
                            option.RemoteProductOptionId = $('input[name^=""option[' + index + '][RemoteProductOptionId]""]').val();
                            option.qty = tempoption;
                            option.optionid = optionid;

                            options.push(option);
                        }
                    })
                    $('#resulttext').html('<img style=""width: 85px; height:25px; display:block;"" src=""/images/modern_loader.gif"" alt=""loading..."" />');
                    $('#bookingDate').html('Selected Options (' + depDateString + ')');


                    FHService.validateAvailability($('#ProductID').val(), options, $('#ManifestID').val())
                        .then(response => {
                            $("".minus, .plus"").css(""pointer-events"", ""all"");
                            $("".minus, .plus"").css(""opacity"", ""1"");
                            if (response['status'] && response['status'] == 'success') {

                                $('#btn_BookNow').removeClass('booking-hide-button').removeClass('disabled');
                                $('#btn_CheckAvailability').removeClass('booking-hide-button').removeClass('disabled');

                                $(""#pricingform"").attr(""action"", siteUrl + ""booking/create/"" + response['reference']);

                                $(""#pricingform"").attr(""do_action"", 'booking')
                                $('#resulttext').html('');
                                $('.isAvailableLabel').removeClass('booking-hide-button');
                                $('.priceReview').removeClass('booking-hide-button');
                                $('.availNote').addClass('booking-hide-button');
                                // document.getElementById('btn_BookNow').scrollIntoView({
                                //     behavior: 'smooth'
                                // });
                                $('.modal-book-now').animate({
                                    scrollTop: $(""#btn_BookNow"").offset().top
                                }, 1000);
                            } else {
                                $('#resulttext').html('<span style=""color: #ff0000;"">' + response['msg'] + '</span>');
                                $('#btn_BookNow').addClass('booking-hide-button');
                                $('.priceReview').addClass('booking-hide-button');
                                $('.availNote').removeClass('booking-hide-button')
                                $('.isAvailableLabel').addClass('booking-hide-button');
                            }
                        })
                        .catch(error => {
                        })
                }


            })
        })
window.$zopim || (function (d, s) {
        var z = $zopim = function (c) {
            z._.push(c)
        }, $ = z.s =
            d.createElement(s), e = d.getElementsByTagName(s)[0];
        z.set = function (o) {
            z.set._.push(o)
        };
        z._ = [];
        z.set._ = [];
        $.async = !0;
        $.setAttribute('charset', 'utf-8');
        $.src = '//v2.zopim.com/?2IF7roBtVHxbAO3GFCCHoWnAxatk5iYR';
        z.t = +new Date;
        $.type = 'text/javascript';
        e.parentNode.insertBefore($, e)
    })(document, 'script');
function clickStar(selectedID) {
            idNum = selectedID.charAt(2);
            userSelectedRating = $(""input[name='starInput']:checked"").val();
            $(""#reviewStarRating"").val(userSelectedRating);

            for (i = 1; i <= 5; i++) {
                if (i > idNum) {
                    $(""#re"" + i).next().removeClass(""fas"");
                    $(""#re"" + i).next().addClass(""far"");
                } else {
                    $(""#re"" + i).next().removeClass(""far"");
                    $(""#re"" + i).next().addClass(""fas"");
                }
            }
        }

        $(""#leaveAReviewForm"").submit(function (e) {
            document.getElementById(""submitReviewBtn"").disabled = true;
            document.getElementById(""submitReviewBtn"").style.opacity = ""0.5"";
            document.getElementById(""cancelReviewBtn"").disabled = true;
            document.getElementById(""cancelReviewBtn"").style.opacity = ""0.5"";
            document.getElementById(""submitReviewBtn"").innerHTML = 'POSTING...';

            e.preventDefault(); // avoid to execute the actual submit of the form.
            grecaptcha.ready(function () {
                grecaptcha.execute('6LehL_wZAAAAAIOa9JFRaJ2ZJf5pGOIy3jPV8HpM', {
                    action: 'reviewForm'
                }).then(function (token) {
                    var recaptchaResponseReview = document.getElementById('recaptchaResponseProductPageReview');
                    recaptchaResponseReview.value = token;
                    // Make the Ajax call here
                    var form = $(this);
                    var url = ""https://sailing-whitsundays.com/enquiry/submitProductPageReview"";

                    $.ajax({
                        url: url,
                        type: 'post',
                        data: $('#leaveAReviewForm').serialize(),
                        success: function () {
                            // alert('success');
                            $('.formPreSub').hide();
                            $('.formPostSub').show();
                            // $(""#leaveAReviewForm"")[0].reset();
                            // if (productIndex < productCount) {
                            //   nextReview();
                            // } else {
                            //   finishReviews();
                            // }
                            // $(""#feedbackBoxTitle"").html('<h3> Thank you for your feedback! </h3>');
                            // $(""#feedbackBoxDesc"").html('<p> We really appreciate it, and will take your comments onboard - the coding team :) </p>');
                            // $(""#feedbackSubmitBtn"").attr(""disabled"", true);
                            // $(""#feedbackSubmitBtn"").css(""opacity"",""0.5"");
                            // $("".starRatings"").hide();
                            // $("".feedbackBoxHeading"").hide();
                            // $("".feedbackFormDesc"").hide();
                        }
                    });
                });

            });

        });
        // Oliver - two functions below will count ""unique"" clicks on the product gallery
        // after the first click is counted, it won't count other clicks for two hours.
        $(function () {

            var handleStorage = function (key, productid, type) {

                //localStorage.clear()

                return new Promise(function (resolve, reject) {
                    var thedate = localStorage.getItem('key_' + productid + '_' + type);
                    var keydata = localStorage.getItem('userkey');

                    if (!keydata) {
                        localStorage.setItem('userkey', key)
                        keydata = key
                    }

                    var now = new Date()

                    if (thedate) {
                        thedate = Date.parse(thedate)
                        var hours = Math.abs(now - thedate) / 36e5
                        if (hours < 2) {
                            reject('already counted')
                        } else {
                            resolve(true)
                        }

                    } else {
                        localStorage.setItem('key_' + productid + '_' + type, new Date());
                        resolve(true)
                    }
                })
            }


            var sendData = function (obj, type) {

                if (!obj.data('userkey')) {
                    var userkey = $('.click-gallery').data('userkey')
                    var productid = $('.click-gallery').data('productid')
                    var websiteid = $('.click-gallery').data('websiteid')
                    var title = $('.click-gallery').data('title')
                } else {
                    var userkey = obj.data('userkey')
                    var productid = obj.data('productid')
                    var websiteid = obj.data('websiteid')
                    var title = obj.data('title')
                }

                var mobile = 0

                if (isMobile() === true) {
                    mobile = 1
                }

                handleStorage(userkey, productid, type)
                    .then((response) => {
                        var keydata = localStorage.getItem('userkey');
                        var request = $.ajax({
                            url: 'https://dapi.thetravelshop.com/openclick/recordProductGalleryClick/',
                            type: ""post"",
                            data: {
                                websiteid: websiteid,
                                title: title,
                                key: keydata,
                                productid: productid,
                                ismobile: mobile,
                                type: type,
                            },
                        })
                        request.done(function (response) {
                        })
                        request.fail(function (response) {
                        })
                    })
                    .catch(function (response) {
                    })
            }


            $('video.product-video').on('play', function (event) {
                sendData($(this), 'video')
            })

            $('.click-gallery').on('click', function (event) {
                sendData($(this), 'gallery')
            })

            $('.product-content-section > h3').on('click', function (e) {
                e.preventDefault();
                //we have 2 show buttons here so it gets pretty complicated
                //quick = the top show less button, we need to use next() prev() to find the classes within this section
                if ($(this)[0].className == ""showLessQuick"") {
                    //hide the quick show less button if its been clicked
                    $(this).toggle();
                    //intro is after this button so we used nextAll
                    $(this).nextAll("".sectionIntro"").toggle();
                    //search for the other next button by finding the header and then using its child button
                    $(this).nextAll("".readMoreHeading"").children("".dropdown-arrow"").toggleClass(""dropdown-arrow-open"");
                    //always change the second button back to read more
                    $(this).nextAll("".readMoreHeading"")[0].firstChild.nodeValue = 'Read More';

                } else {
                    //the other next button is after all information so we can use prevAll for the classes
                    $(this).prevAll("".showLessQuick"").toggle();
                    $(this).prevAll("".sectionIntro"").toggle();
                    $(this).children("".dropdown-arrow"").toggleClass(""dropdown-arrow-open"");
                    $(this)[0].firstChild.nodeValue = (($(this)[0].firstChild.nodeValue == 'Show Less') ? 'Read More' : 'Show Less');

                }
                $(this).nextAll("".product-content-section-dropdown"").toggle();

                if ($(this).children("".dropdown-arrow"").hasClass(""dropdown-arrow-open"") == false) {
                    $('html, body').animate({
                        scrollTop: $(this).prev("".sectionIntro"").offset().top - 150
                    }, 0);
                }
            });

            const tooltipText = ""All reviews are from verified customers who purchased the activity. Reviews can only be submitted after the activity takes place."";

            const $tooltip = $(""<div class='tooltip-box'></div>"").text(tooltipText);
            $(""body"").append($tooltip);

            $(""#infoTooltip"").hover(
                function (e) {
                    const tooltipWidth = $tooltip.outerWidth();
                    const tooltipHeight = $tooltip.outerHeight();
                    const offset = $(this).offset();
                    const padding = 10; // gap between icon and tooltip
                    const scrollTop = $(window).scrollTop();
                    const scrollLeft = $(window).scrollLeft();
                    const viewportWidth = $(window).width();
                    const viewportHeight = $(window).height();

                    // Default position: bottom-right of icon
                    let left = offset.left + 20;
                    let top = offset.top + 20;

                    // Adjust if overflowing right
                    if (left + tooltipWidth > viewportWidth + scrollLeft) {
                        left = viewportWidth + scrollLeft - tooltipWidth - padding;
                    }

                    // Adjust if overflowing bottom
                    if (top + tooltipHeight > viewportHeight + scrollTop) {
                        top = offset.top - tooltipHeight - padding;
                    }

                    $tooltip.css({
                        top: top,
                        left: left
                    }).fadeIn(200);
                },
                function () {
                    $tooltip.fadeOut(100);
                }
            );


        })
// detect if it is a mobile device
        var isMobile = function () {
            try {
                document.createEvent(""TouchEvent"");
                return true;
            } catch (e) {
                return false;
            }
        }

        var sendClickData = function (obj, type, element) {

            if (!obj.data('userkey')) {
                var productid = element.data('productid')
                var websiteid = element.data('websiteid')
                var title = element.data('title')
            } else {
                var productid = obj.data('productid')
                var websiteid = obj.data('websiteid')
                var title = obj.data('title')
            }

            var mobile = 0

            if (isMobile() === true) {
                mobile = 1
            }

            $.ajax({
                url: '/product/addNewReviewClick',
                type: 'POST',
                data: {
                    websiteId: websiteid,
                    productTitle: title,
                    productId: productid,
                    isMobile: mobile,
                    clickType: type,
                },
                success: function (response) {
                    // console.log('Response:', response);
                },
                error: function (xhr, status, error) {
                    // console.error('Error:', status, error);
                }
            });
        }


        $(document).ready(function () {

            if (window.location.href.indexOf('#reviewProduct') != -1) {
                $('#reviewProduct').modal('show');
            }


            let totalReviewsShown = 0;
            let counter = 0;
            starDisplay();

                        counter++;
            reviewCount = 0;
            displayGraph(reviewCount, counter);
                        counter++;
            reviewCount = 0;
            displayGraph(reviewCount, counter);
                        counter++;
            reviewCount = 1;
            displayGraph(reviewCount, counter);
                        counter++;
            reviewCount = 3;
            displayGraph(reviewCount, counter);
                        counter++;
            reviewCount = 66;
            displayGraph(reviewCount, counter);
            
            function starDisplay() {
                let rating = 4.9;
                let starPercentage = (rating / 5) * 100;
                let starPercentageRounded = `${Math.round(starPercentage / 10) * 10}%`;
                $("".stars-inner"").css(""width"", starPercentageRounded);
            }

            function displayGraph(reviewCount, index) {
                let starPercentage = (reviewCount / 2) * 100;
                $("".bar-"" + index).css(""width"", starPercentage + ""%"");
            }

            var isMobile = function () {
                try {
                    document.createEvent(""TouchEvent"");
                    return true;
                } catch (e) {
                    return false;
                }
            }


            $('.reviewSummary').on('click', function (event) {
                sendClickData($(this), 'reviewSummary', $('.reviewSummary'))

                $('html,body').animate({
                        scrollTop: $("".tab-reviews-block"").offset().top - 105
                    },
                    900);
            });

            function userStarDisplay(rating) {
                let starPercentage = (rating / 5) * 100;
                let starPercentageRounded = `${Math.round(starPercentage / 10) * 10}%`;
                $("".reviewer-stars-inner"").css(""width"", starPercentageRounded);
            }

            $('.product-content-section-dropdown').hide();

            //if the users was sent via anchor tag we need to use the tag to open the dropdowns
            if (location.href.indexOf(""#"") != -1) {
                var url = location.href;
                var hash = '#' + url.substring(url.indexOf(""#"") + 1);
                var test = $(hash).prev();

                $(hash).next("".product-content-section-dropdown"").show();

                // var offset =  $(hash).prev("".product-content-section-dropdown"").height();
                // scrollTop: $(window).scrollTop() - offset
                // $(hash).css(""top"",offset);
                // console.log($(hash).prev("".product-content-section-dropdown"").height());
                test.children("".dropdown-arrow"").toggleClass(""dropdown-arrow-open"");

            }
            $('.copyToClipboard').on('click', function (event) {
                copyToClipboard($(this).siblings(""a"").eq(0).attr(""data-copyID""));
            });

            //create temp element to store onto the clipboard then remove
            function copyToClipboard(sectionID) {
                var url = location.href;
                //if you already have an anchor id in the url
                if (url.includes('#'))
                    url = url.substring(0, url.indexOf('#'));
                var $temp = $(""<input>"");
                $(""body"").append($temp);
                $temp.val(url + ""#"" + sectionID).select();
                document.execCommand(""copy"");
                $temp.remove();
            }

            $('.faq').on('click', function (event) {
                // Check if the clicked element is the <details> or a child of it
                const details = $(event.target).is('details') ? $(event.target) : $(event.target).closest('details');
                const icon = details.find('i');

                // Timeout is used to wait for the 'open' attribute to be updated
                setTimeout(() => {
                    if (details.prop('open')) {
                        icon.removeClass('fa-plus');
                        icon.addClass('fa-minus');
                    } else {
                        icon.removeClass('fa-minus');
                        icon.addClass('fa-plus');
                    }
                }, 0);
            });

            $('.tac-dropdown').on('click', function (event) {
                // Check if the clicked element is the <details> or a child of it
                const details = $(event.target).is('details') ? $(event.target) : $(event.target).closest('details');
                const icon = details.find('i');

                // Timeout is used to wait for the 'open' attribute to be updated
                setTimeout(() => {
                    if (details.prop('open')) {
                        icon.removeClass('fa-chevron-down');
                        icon.addClass('fa-chevron-up');
                    } else {
                        icon.removeClass('fa-chevron-up');
                        icon.addClass('fa-chevron-down');
                    }
                }, 0);
            });


        });","<body>
<!-- Google Tag Manager (noscript) -->
<noscript>
<iframe height=""0"" src=""https://www.googletagmanager.com/ns.html?id=GTM-N288PZPD"" style=""display:none;visibility:hidden"" width=""0""></iframe>
</noscript>
<!-- End Google Tag Manager (noscript) --><script type=""text/javascript"">
$(document).ready(function() {

  // $("".dropdown"").on('touchend', function(event) {
  //     console.log(""test"")
  //   event.stopPropagation();
  //   event.preventDefault();
  //   if ($(this).hasClass('dropdown-open')) {
  //     $(this).removeClass('dropdown-open');
  //     $(this).next('ul').hide();
  //   } else {
  //     $(this).addClass('dropdown-open');
  //     $(this).next('ul').show();
  //   }
  // });

$("".mobile-menu-toggle"").click(function(){
    if ($("".mobile-menu-toggle"").hasClass('mobile-menu-open')) {
      	$(""nav"").removeClass(""nav-active"");
		$("".top-bit-blue"").show();
		$(""body"").css({ overflow: 'auto', height: 'auto' });
		$("".mobile-menu-toggle"").removeClass('mobile-menu-open')
    } else {
		$(""nav"").addClass(""nav-active"");
		$("".top-bit-blue"").hide();
		$(""body"").css({overflow: 'hidden', height: '100%' });
		$("".mobile-menu-toggle"").addClass('mobile-menu-open')
    }
});

});

$(window).scroll(function(){
    if ($(window).scrollTop() >= 34) {
    	if (!$('header').hasClass(""header-sticky"")) {
        	$('header').addClass('header-sticky');
        	$('.banner-fill').addClass('banner-margin');
    	}
    } else {
    	if ($('header').hasClass(""header-sticky"")) {
	        $('header').removeClass('header-sticky');
	        $('.banner-fill').removeClass('banner-margin');
    	}
    }
});
</script>
<div class=""top-bit-blue"">
<div class=""header-container"">
<a class=""top-bit-phone"" href=""tel:+61 74914 2425"">07 4914 2425</a>
<div class=""search-top"">
<form action=""https://sailing-whitsundays.com/searchbar"" method=""post"">
<div class=""search-top-bar"">
<input class=""search-top-input"" name=""search"" placeholder=""Search"" type=""text""/>
<input class=""search-top-submit"" type=""submit"" value=""GO""/>
</div>
</form>
</div>
</div>
</div>
<header class=""header-default"">
<div class=""header-container-home"">
<a href=""https://sailing-whitsundays.com/"">
<img alt=""official sailing whitsundays logo"" class=""logo"" src=""/images/Sailing-Whitsundays-Official-Logo.png""/>
</a>
<nav>
<ul>
<li><a href=""https://sailing-whitsundays.com/"">Home</a></li>
<li>
<span class=""dropdown"">Deals</span>
<ul>
<div class=""flex flex-row"">
<div class=""tourTypeSummaryContainer"">
<div class=""inner-div"">
<h2>Deals</h2>
<p>Save money on your Whitsunday and Great Barrier Reef adventures! Our tour deals offer discounts, packages, and last-minute sales to make your trip more affordable.</p>
</div>
</div>
<div class=""responsive-nav-container"">
<li><a class=""pa-click-record"" data-id=""171"" href=""https://sailing-whitsundays.com/tours/on-sale-now"">
                                        On Sale Now                                    </a>
</li>
<li><a class=""pa-click-record"" data-id=""464"" href=""https://sailing-whitsundays.com/tours/last-minute-overnight-tours"">
                                        Last Minute Overnight Tours                                    </a>
</li>
<li><a class=""pa-click-record"" data-id=""436"" href=""https://sailing-whitsundays.com/tours/last-minute-day-tours"">
                                        Last Minute Day Tours                                    </a>
</li>
<li><a class=""pa-click-record"" data-id=""241"" href=""https://sailing-whitsundays.com/tours/day-tour-deals"">
                                        Day Tour Deals                                    </a>
</li>
<li><a class=""pa-click-record"" data-id=""240"" href=""https://sailing-whitsundays.com/tours/overnight-tour-deals"">
                                        Overnight Tour Deals                                    </a>
</li>
<li><a class=""pa-click-record"" data-id=""135"" href=""https://sailing-whitsundays.com/tours/east-coast"">
                                        East Coast Itineraries                 "
